define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,i,t,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,config:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.config=o.config,r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new t({map:r.view.map,mapconfig:r.model.attributes.mapconfig}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig,controlsconfig:r.config.controls}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,i),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject(r)}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl","models/error/user","views/error/user"],function(e,t,n,o,r,s,i,l,a,c){"use strict";var d=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();try{var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),t.geojson?(t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)):t.$def.reject()}).fail(function(e){new c({model:new a({msg:"Error encountered handling xml file at '"+t.get("path")+"': "+e})}),t.$def.reject()})}catch(o){t.$def.reject(),new c({model:new a({msg:o.toString()})})}},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){var e=this;try{var t=this.xml2html(this.get("xml"),i,{},"text");this.geojson=JSON.parse(t)}catch(n){new c({model:new a({msg:"Failed to parse geojson generated from '"+e.get("path")+"': "+n.toString()})})}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(d.prototype,o),t.extend(d.prototype,r),t.extend(d.prototype,s),d});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit","models/error/user","views/error/user"],function(e,i,n,a,r,t,o,m,s){"use strict";var p=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(n){var a=this;a.$def=e.Deferred(),a.model=n.model,a.issue=n.issue,e.when.apply({},[a.issue.init(),a.model.init()]).done(function(){if(a.mapconfig=a.model.get("mapconfig"),!(e("#"+this.id).length>0||e("#"+this.id).children().length>0))try{if(a._initMap(),!a.markerViews)throw"undefined marker views.";var n=i.map(a.markerViews,function(e){e.$def});e.when.apply({},n).done(function(){a.$def.resolve(a)})}catch(r){new s({model:new m({msg:r.toString()})})}})},_initMap:function(){var n=this;if(0===e("#"+this.id).length){if(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),n.mapconfig.view)try{n.map.setView(new a.LatLng(n.mapconfig.view.lat,n.mapconfig.view.lng),n.mapconfig.view.zoom)}catch(o){new s({model:new m({msg:"Leaflet reports bad data in map.json file. "+o.toString()})})}new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})})}},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(p.prototype,o),p});
define("views/marker",["jquery","underscore","backbone","models/error/user","views/error/user","text!partials/marker.html","text!partials/marker-legend.html","mixins/asyncInit"],function(e,r,t,i,a,n,o,l){"use strict";var m=t.View.extend({template:r.template(n),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(r){var t=this;t.$def=e.Deferred(),t.map=r.map,t.mapconfig=r.mapconfig;try{if(t.initMarkerLayer(),!t.markerLayer)throw"Failed to initialize marker layer.";t.$def.resolve(t)}catch(n){new a({model:new i({msg:n.toString()})})}},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){var e=this;try{if(!this.markerLayer){var r=e.model.get("path");throw"map marker layer is undefined for article '"+r+"'. Check lat/lng values in file."}this.markerLayer.addTo(this.map)}catch(t){new a({model:new i({msg:"Error adding marker layer: "+t.toString()})})}}});return r.extend(m.prototype,l),m});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,o,n,t,i){"use strict";var a=n.extend({view:null,router:null,map:null,controlsconfig:null,initialize:function(e){var o=this;o.map=e.map,o.view=e.view,o.model=e.model,o.controlsconfig=e.controlsconfig,o.subControllers=[],r.has(o.controlsconfig,"placetype")&&o.controlsconfig.placetype.enable&&o.subControllers.push(new t({views:o.view.markerViews,map:o.view.map,mapconfig:o.model.attributes.mapconfig})),r.has(o.controlsconfig,"timeline")&&o.controlsconfig.timeline.enable&&o.subControllers.push(new i({markerViews:o.view.markerViews,map:o.view.map,siteconfig:o.model.attributes.config})),r.forEach(o.subControllers,function(e){o.listenTo(e,"filter",function(){o._updateMarkers()})})},_updateMarkers:function(){var e=this,o=[],n=[];r.forEach(e.subControllers,function(e){var o=e.getFilterState();n.push(o.hide),n=r.flatten(n)}),r.forEach(e.view.markerViews,function(e){var t=r.find(n,function(r){r===e.markerLayer});t||o.push(e.markerLayer)}),r.forEach(o,function(r){e.view.map.addLayer(r)}),r.forEach(n,function(r){e.view.map.removeLayer(r)})}});return a});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,mapconfig:null,initialize:function(t){if(this.map=t.map,this.mapconfig=t.mapconfig,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n.mapconfig.view||n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,s=p.map,d=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+d).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=s.getSize().x?s.panBy([a-n,0]):s.getBounds().contains(e.getLatLng())||(s.closePopup(e),s.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.msg)}});return s});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html&&this.$el.modal&&(this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0})),this}});return i});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","models/error/user","views/error/user","text!partials/marker-legend.html"],function(e,r,o,t,n,l,a){"use strict";var i=t.extend({views:null,router:null,map:null,control:null,initialize:function(o){var t=this;t.views=o.views,t.map=o.map,t.mapconfig=o.mapconfig;var i=r.template(a),c=r.groupBy(t.views,function(e){return e.model.getGeojson().properties.layer}),s=t.control=L.control.layers(null,null,t.mapconfig.control.layers.options).addTo(t.map),u=s.getContainer();r.forEach(Object.keys(u),function(e){e.match("mouseover")&&u.removeEventListener("mouseover",u[e]),e.match("mouseout")&&u.removeEventListener("mouseout",u[e])}),L.DomEvent.on(e(".leaflet-control-layers-toggle")[0],"click",s._expand,s),r.each(r.keys(c),function(e){var o=e.replace(/\s+/g,"-"),t=i({iconUrl:c[e][0].model.get("iconUrl"),title:e,klass:o}),a=r.map(c[e],function(e){return e.markerLayer});try{var u=L.layerGroup(a);s.addOverlay(u,t)}catch(m){new l({model:new n({msg:m.toString()})})}}),e("input.leaflet-control-layers-selector").each(function(r,o){e(o).click()}),s.mapLayerController=t,s._onInputClick=t._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,o,t=this,n=[],l=[],a=t._form.getElementsByTagName("input"),i=a.length;for(t._handlingClick=!0,e=0;i>e;e++)r=a[e],o=t._layers[r.layerId],o.layer.getLayers().forEach(r.checked?function(e){n.push(e)}:function(e){l.push(e)});t._handlingClick=!1,t._refocusOnMap(),t.mapLayerController.show=n,t.mapLayerController.hide=l,t.mapLayerController.trigger("filter")}});return i});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,a){"use strict";var l=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var r=this;r.views=e.views,r.map=e.map,r.markerViews=e.markerViews,r.model=new a({siteconfig:e.siteconfig,markerViews:e.markerViews}),r.view=new t({model:r.model,map:r.map,markerViews:e.markerViews}),r.listenTo(r.view,"filter",r._handleFilterEvent),r.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],a={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return a[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in a)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return l});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,n,l){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),t.css({left:(i(".slidesjs-container").width()-t.width())/2-parseInt(t.css("padding-left"),10),margin:0}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,t,n,l){"use strict";var o=t.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var i,t,l,o,a=this;l=e("#map").height(),o=document.body.clientHeight,Math.abs(o/2-l)<2?(i="bottomright",t=e("#map").height()-100):(i="topleft",t=500),a.model.init().done(function(){a.timeline=n.control.timeline(a.map,a.model,{height:t,position:i,on:{brushend:function(e){a._handleFilter(e)}}}).addTo(a.map)})}});return o});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//unpkg.com/leaflet@0.7.3/dist/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsImNvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsInJvdXRlcy9yb3V0ZXIuanMiLCJ2aWV3cy9hcHAuanMiLCJ2aWV3cy9hcnRpY2xlLmpzIiwidmlld3MvY2xlYXIuanMiLCJ2aWV3cy9pc3N1ZS5qcyIsInZpZXdzL21hcC5qcyIsInZpZXdzL21hcmtlci5qcyIsInZpZXdzL21lbnUuanMiLCJ2aWV3cy9wYWdlLmpzIiwidmlld3MvcGFydGlhbC5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJtb2RlbHMvZXJyb3IvdXNlci5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS5qcyIsInZpZXdzL2FydGljbGUvbWVudS5qcyIsInZpZXdzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94LmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXIuanMiLCJ2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsInZpZXdzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkFydGljbGVNb2RlbCIsIkFydGljbGVzQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJleHRlbmQiLCJtb2RlbCIsIlRpbWVsaW5lSXRlbU1vZGVsIiwiVGltZWxpbmVDb2xsZWN0aW9uIiwiQ29udHJvbGxlciIsIkFzeW5jSW5pdCIsIklzc3VlVmlldyIsIklzc3VlTW9kZWwiLCJJc3N1ZUNvbnRyb2xsZXIiLCJ2aWV3Iiwicm91dGVyIiwiaW5pdGlhbGl6ZSIsImFyZ3MiLCJ0aGF0IiwidGhpcyIsIiRkZWYiLCJEZWZlcnJlZCIsImNvbmZpZyIsInJlbmRlciIsImluaXQiLCJkb25lIiwiZm9yRWFjaCIsImdldCIsIm1vZGVscyIsImFydGljbGUiLCJsaXN0ZW5UbyIsInVybCIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInJlbmRlckFydGljbGUiLCJyZXNvbHZlIiwiYWx3YXlzIiwicmVqZWN0IiwicHJvdG90eXBlIiwiTWFwTW9kZWwiLCJNYXBWaWV3IiwiTWFwUGFuQ29udHJvbGxlciIsIk1hcExheWVyQ29udHJvbGxlciIsIk1hcFRpbWVsaW5lQ29udHJvbGxlciIsIk1hcENvbnRyb2xsZXIiLCJpc3N1ZSIsIm1hcFBhbkNvbnRyb2xsZXIiLCJtYXBUaW1lbGluZUNvbnRyb2xsZXIiLCJtYXAiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwibWFwTGF5ZXJDb250cm9sbGVyIiwiY29udHJvbHNjb25maWciLCJjb250cm9scyIsIm1hcmtlclZpZXdzIiwiX3JlZ2lzdGVyTWFya2VycyIsImZpdE1hcmtlckJvdW5kcyIsIndoZW4iLCJhcHBseSIsIm1hcmtlclZpZXciLCJtYXBQb3B1cE9wZW4iLCJtYXJrZXJMYXllciIsIm1hcmtlciIsIl9nZXRNYXJrZXJMYXllciIsImhhbmRsZVBvcHVwUG9zaXRpb24iLCJnZXRQb3B1cCIsIm1hcFBvcHVwVG9nZ2xlIiwiZXZ0IiwiaG92ZXJQb3B1cCIsIm9wZW5wb3B1cCIsInBvcHVwaWQiLCJtYXBNYXJrZXIiLCJnZXRMYXRMbmciLCJvcGVuUG9wdXAiLCJvYmoiLCJtZXRob2QiLCJtYXBNYXJrZXJMYXllciIsImxheWVycyIsIkwiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJkMyIsIkNvbnRyb2wiLCJUaW1lbGluZSIsIm9wdGlvbnMiLCJvcmllbnRhdGlvbiIsImhlaWdodCIsIndpZHRoIiwibWFyZ2luIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29sbGFwc2VkIiwiaXRlbSIsIm1pbkhlaWdodCIsIm9uIiwidGl0bGUiLCJwb3NpdGlvbiIsInNvdXJjZSIsIlV0aWwiLCJzZXRPcHRpb25zIiwiX21hcCIsIl9zb3VyY2UiLCJjb250YWluZXIiLCJfY29udGFpbmVyIiwiRG9tVXRpbCIsImNyZWF0ZSIsImFkZENsYXNzIiwidG9nZ2xlIiwiX3RvZ2dsZSIsImxpbmsiLCJleHBhbmQiLCJfZXhwYW5kIiwiQnJvd3NlciIsInRvdWNoIiwiRG9tRXZlbnQiLCJzdG9wIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24iLCJvblJlbW92ZSIsIm9uQWRkIiwiX2V4cGFuZGVkIiwiX2NvbGxhcHNlIiwicmVtb3ZlQ2xhc3MiLCJfdGltZWxpbmUiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJ5U2NhbGUiLCJfeFNjYWxlIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsIl95U2NhbGUiLCJkb21haW4iLCJzdGFydCIsImVuZCIsInRpbWVsaW5lIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImJhbmQiLCJicnVzaCIsInNlbGVjdEFsbCIsImRhdGEiLCJnZXRJdGVtcyIsImVudGVyIiwiZCIsIm1heCIsImR1cmF0aW9uIiwiX2JydXNoIiwic3ZnIiwieSIsImV4dFN0YXJ0IiwiZXh0ZW50IiwiZXh0RW5kIiwicmVzdWx0cyIsImNsZWFyIiwic2VsZWN0ZWQiLCJlYWNoIiwiaSIsInB1c2giLCJicnVzaGVuZCIsInlCcnVzaCIsImNhbGwiLCJ5QXhpcyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrU2l6ZSIsInRpY2tWYWx1ZXMiLCJ0aWNrRm9ybWF0IiwiY29sbGFwc2UiLCJvZmYiLCJjb250cm9sIiwicHJvbWlzZSIsIkRPTVdhdGNoZXIiLCJ3YXRjaERPTSIsIm1zIiwic2VsIiwibGVuZ3RoIiwiZiIsImRvY3VtZW50IiwiYm9keSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJGZXRjaFhNTCIsImZldGNoWE1MIiwiJGdldCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsIlhNTDJIVE1MIiwiX2RvYyIsInhtbCIsInhtbERvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsIkRvY3VtZW50IiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImtleXMiLCJrZXkiLCJzZXRQYXJhbWV0ZXIiLCJyZXN1bHQiLCJkb2MiLCJ0cmFuc2Zvcm1Ub0RvY3VtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsImRvY3VtZW50RWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiZSIsInRvU3RyaW5nIiwiZ2VvSnNvblhzbCIsImNpdGVkUmFuZ2VYc2wiLCJVc2VyRXJyb3JNb2RlbCIsIlVzZXJFcnJvclZpZXciLCJNb2RlbCIsInNldCIsIl9ta0dlb2pzb24iLCJfbWtDaXRlZFJhbmdlIiwiZ2VvanNvbiIsInByb3BlcnRpZXMiLCJsYXllciIsImZhaWwiLCJtc2ciLCJkZWZhdWx0cyIsInBsYWNlVHlwZSIsImljb25VcmwiLCJjaXRlZFJhbmdlIiwiZ2V0R2VvanNvbiIsImpzb25TdHJpbmciLCJKU09OIiwicGFyc2UiLCJBcnRpY2xlQ29sbGVjdGlvbiIsImFydGRpciIsImFydGljbGVzIiwicGF0aEJhc2UiLCJtYXRjaCIsImZpbGVzIiwiY29sIiwidW5kZWZpbmVkIiwiZmlsZSIsImFydGljbGVpZCIsImFydGljbGVkaXIiLCJwYXRoIiwiaW5pdHMiLCJhZGQiLCJzZXRJY29ucyIsIiRwcm9taXNlIiwic3RhdGUiLCJpY2NvbmZpZyIsIm1hcmtlcnMiLCJpY29ucyIsImljb25GaWxlcyIsInNodWZmbGUiLCJmbGF0dGVuIiwiZW50cnkiLCJkaXIiLCJjb25jYXQiLCJkZWZhdWx0SWNvbkZpbGUiLCJnZXRBcnRpY2xlIiwiYXJ0IiwiYXQiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiQ2xlYXJWaWV3IiwiTWVudVZpZXciLCJwYWdlcyIsImlzc3VlQ29udHJvbGxlciIsIm1hcENvbnRyb2xsZXIiLCJvcHRzIiwiaGlzdG9yeSIsImZyYWdtZW50IiwicGFnZSIsInBhZ2VDb25maWciLCJtYXBQYWdlIiwiaG9tZSIsInBjIiwidmlld05hbWUiLCJzdHJpbmdpZnkiLCJjb25mZyIsImxvY2F0aW9uIiwiaHJlZiIsImZ1bGwiLCJwYXJ0aWFsIiwicmVxdWlyZSIsIlZpZXciLCJ2IiwiaWQiLCJyZW1vdmUiLCJjaGlsZHJlbiIsIkFwcFZpZXciLCJlbCIsInJlc2l6ZSIsInJlbG9hZCIsIkdhbGxlcnlWaWV3IiwiQXJ0aWNsZVZpZXciLCIkZWwiLCJmaW5kIiwiaHRtbCIsImFydGljbGUtZGlyIiwiY2xpY2siLCJlbHQiLCJ0bXBsIiwiZW1wdHkiLCJ0ZW1wbGF0ZSIsIm1hcFBhcnRpYWwiLCJNYXJrZXJWaWV3IiwidGFnTmFtZSIsIl9pbml0TWFwIiwibWFya2VyVmlld0luaXRzIiwiTWFwIiwic2V0VmlldyIsIkxhdExuZyIsImxhdCIsImxuZyIsInpvb20iLCJUaWxlTGF5ZXIiLCJ0aWxlTGF5ZXIiLCJhZGRUbyIsIm12IiwibGVnZW5kUGFydGlhbCIsImluaXRNYXJrZXJMYXllciIsImljb25Db25maWciLCJmZWF0dXJlcyIsImljb24iLCJnZW9Kc29uIiwib25FYWNoRmVhdHVyZSIsImZlYXR1cmUiLCJwb3B1cCIsInNldENvbnRlbnQiLCJiaW5kUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicG9pbnRUb0xheWVyIiwibGF0bG5nIiwiY2xpY2thYmxlIiwidGV4dCIsIm1hcmtlcm5hbWUiLCJvcGFjaXR5IiwicmlzZU9uSG92ZXIiLCJtZW51VG1wbCIsIkFydGljbGVNZW51VmlldyIsIml0ZW1zIiwibWVudSIsInByb21pc2VzIiwidGVtcGxhdGVzIiwiY29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uIiwidGVtcGwiLCJjb250ZW50Iiwic29ydGVyIiwic3ViQ29udGVudCIsInNvcnRLZXlzIiwiaiIsIiRsaSIsInJlcGxhY2UiLCJhbXYiLCJFbGVtZW50Iiwibm9kZU5hbWUiLCJvdXRlckhUTUwiLCJjbG9uZSIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJsYWJlbCIsInRoZW4iLCIkZmFpbERlZiIsIlBhZ2VWaWV3IiwiUGFydGlhbFZpZXciLCIkd2F0Y2hEZWYiLCJQbGFjZVR5cGVDb250cm9sbGVyIiwiVGltZWxpbmVDb250cm9sbGVyIiwic3ViQ29udHJvbGxlcnMiLCJwbGFjZXR5cGUiLCJlbmFibGUiLCJ2aWV3cyIsInNpdGVjb25maWciLCJzdWJDb250cm9sbGVyIiwiX3VwZGF0ZU1hcmtlcnMiLCJzaG93IiwiaGlkZSIsInJlcyIsImdldEZpbHRlclN0YXRlIiwiZm91bmQiLCJoaWRkZW5MYXllciIsImFkZExheWVyIiwicmVtb3ZlTGF5ZXIiLCJfZml0TWFya2VyQm91bmRzIiwiZ2V0RWxlbWVudEJ5SWQiLCJlZGdlUHRYIiwiZ2V0Vmlld3BvcnRPZmZzZXQiLCJ4IiwiYm91bmRzIiwibGF0TG5nQm91bmRzIiwibG5nTGF0IiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsInNsaWNlIiwibGF0TG5nIiwicmV2ZXJzZSIsImZpdEJvdW5kcyIsImdldFNpemUiLCJwYWRkaW5nQm90dG9tUmlnaHQiLCJjbGllbnRXaWR0aCIsImludmFsaWRhdGVTaXplIiwiJHBvcHVwV3JhcCIsInBvcHVwTGF0TG5nIiwicG9wdXBSaWdodFgiLCJwYWQiLCJnZXRDb250ZW50IiwiY2xvc2VzdCIsImZpcnN0IiwicG9pbnQiLCJhdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJvZmZzZXQiLCJwYW5CeSIsImdldEJvdW5kcyIsImNvbnRhaW5zIiwiQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyIsIkFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3IiwiQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3IiwiQXJ0aWNsZUdhbGxlcnlWaWV3Iiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJkZWZzIiwiaW1nIiwibG9hZCIsImFtWHNsIiwibWVudWl0ZW0iLCJtb2RhbCIsImtleWJvYXJkIiwiUGxhY2V0eXBlQ29udHJvbGxlciIsImxlZ2VuZFRlbXBsIiwibGF5ZXJNYXJrZXJzIiwiZ3JvdXBCeSIsImdldENvbnRhaW5lciIsIk9iamVjdCIsImxheWVyTmFtZSIsImtsYXNzIiwibGF5ZXJMZWdlbmQiLCJtYXJrZXJMYXllcnMiLCJsYXllckdyb3VwIiwiYWRkT3ZlcmxheSIsIl9vbklucHV0Q2xpY2siLCJpbnB1dCIsImlucHV0cyIsIl9mb3JtIiwiaW5wdXRzTGVuIiwiX2hhbmRsaW5nQ2xpY2siLCJfbGF5ZXJzIiwibGF5ZXJJZCIsImNoZWNrZWQiLCJfcmVmb2N1c09uTWFwIiwiVGltZWxpbmVWaWV3IiwiVGltZWxpbmVNb2RlbCIsIl9oYW5kbGVGaWx0ZXJFdmVudCIsInNob3dMYXllcnMiLCJoaWRlTGF5ZXJzIiwic2hvd0lkcyIsImZpbHRlciIsImxpZ2h0Ym94VGl0bGVUZW1wbCIsIm1hZ25pZmljUG9wdXAiLCJnYWxsZXJ5IiwiZW5hYmxlZCIsImltYWdlIiwidGl0bGVTcmMiLCIkaXRlbSIsIiRwbyIsInBjdCIsInBvcG92ZXJUZW1wbCIsInBvcG92ZXJDb250ZW50VGVtcGwiLCJnZXRBdHRyaWJ1dGUiLCJwb3BvdmVyIiwicGxhY2VtZW50Iiwic2xpZGVzanMiLCJuYXZpZ2F0aW9uIiwiYWN0aXZlIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImZhZGUiLCJzcGVlZCIsImNyb3NzZmFkZSIsImNhbGxiYWNrIiwibG9hZGVkIiwibnVtYmVyIiwiJGltZyIsInZpc2liaWxpdHkiLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY29tcGxldGUiLCJuZXdJbWciLCJUaW1lbGluZUl0ZW0iLCJib29rY29uZmlnIiwiYm9vayIsIl9pbml0aWFsaXplIiwiYm9va0NoYXB0ZXIiLCJmaW5kV2hlcmUiLCJjaGFwdGVycyIsInBhcnQiLCJjaGFwdGVyIiwicGFyYWdyYXBocyIsInBhcmFncmFwaCIsIm1pbiIsInZhbHVlcyIsInAiLCJ0aW1lbGluZUNvbnRyb2xQYXJ0aWFsIiwiX3RpbWVsaW5lQ29sbGFwc2UiLCJfaGFuZGxlRmlsdGVyIiwiY29udHJvbGhlaWdodCIsIm1hcGhlaWdodCIsImRvY3VtZW50aGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiTWF0aCIsImFicyIsImNvbXBhcmVUbyIsInBhdGhzIiwiYmFja2JvbmUiLCJib290c3RyYXAiLCJqcXVlcnkiLCJsZWFmbGV0IiwibGlnaHRib3giLCJ1bmRlcnNjb3JlIiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwicm91dGVzIiwiZGVidWciXSwibWFwcGluZ3MiOiJBQUNBQSxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLGtCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNDLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJGLEVBQVNHLFdBQVdDLFFBQ3pDQyxNQUFPSixHQUVYLE9BQU9DO0FDVlhMLE9BQU8sd0JBQ0gsU0FDQSxhQUNBLFdBQ0Esa0NBQ0QsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU00sR0FDckIsWUFDQSxJQUFJQyxHQUFxQlAsRUFBU0csV0FBV0MsUUFDekNDLE1BQU9DLEdBRVgsT0FBT0M7QUNWWFYsT0FBTyxxQkFDRCxTQUNBLGFBQ0EsV0FDQSx3QkFDQSxtQkFDQSxjQUNBLGdCQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNRLEVBQVdDLEVBQVVDLEVBQVVDLEdBQ3BELFlBQ0EsSUFBSUMsR0FBa0JKLEVBQVdKLFFBQzNCQyxNQUFPLEtBQ1BRLEtBQU8sS0FDUEMsT0FBUSxLQUNSQyxXQUFZLFNBQVNDLEdBQ25CLEdBQUlDLEdBQU9DLElBQ1hELEdBQUtFLEtBQU9yQixFQUFFc0IsV0FDZEgsRUFBS0gsT0FBU0UsRUFBS0YsT0FDbkJHLEVBQUtaLE1BQVEsR0FBSU0sSUFBYVUsT0FBUUwsRUFBS0ssU0FDM0NKLEVBQUtKLEtBQU8sR0FBSUgsSUFDVkwsTUFBT1ksRUFBS1osTUFDWmdCLE9BQVFMLEVBQUtLLFNBRW5CSixFQUFLSixLQUFLUyxTQUNWTCxFQUFLWixNQUFNa0IsT0FBT0MsS0FBSyxXQUNuQnpCLEVBQUUwQixRQUFRUixFQUFLWixNQUFNcUIsSUFBSSxjQUFjQyxPQUFRLFNBQVNDLEdBQ3BEWCxFQUFLWSxTQUFTRCxFQUFTLFNBQVUsU0FBU0EsR0FDdEMsR0FBSUUsR0FBTSxXQUFhRixFQUFRRixJQUFJLFlBQ25DVCxHQUFLSCxPQUFPaUIsU0FBU0QsR0FBTUUsU0FBUyxJQUNwQ2YsRUFBS0osS0FBS29CLGNBQWNMLE9BR2hDWCxFQUFLRSxLQUFLZSxRQUFRakIsS0FDbkJrQixPQUFPLFdBQ05sQixFQUFLRSxLQUFLaUIsYUFLdEIsT0FEQXJDLEdBQUVLLE9BQU9RLEVBQWdCeUIsVUFBVTVCLEdBQzVCRztBQ3ZDWGYsT0FBTyxtQkFDRCxTQUNBLGFBQ0EsV0FDQSx3QkFDQSxhQUNBLFlBQ0EsbUJBQ0Esc0JBQ0EseUJBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU1EsRUFBVzhCLEVBQVNDLEVBQVE5QixFQUFVK0IsRUFBaUJDLEVBQW1CQyxHQUMvRixZQUNBLElBQUlDLEdBQWdCbkMsRUFBV0osUUFDekJDLE1BQU8sS0FDUFEsS0FBTyxLQUNQK0IsTUFBTyxLQUNQdkIsT0FBUSxLQUNSd0IsaUJBQW1CLEtBQ25CSixtQkFBcUIsS0FDckJLLHNCQUF3QixLQUN4Qi9CLFdBQVksU0FBU0MsR0FDbkIsR0FBSUMsR0FBT0MsSUFDWEQsR0FBS0UsS0FBT3JCLEVBQUVzQixXQUNkSCxFQUFLSSxPQUFTTCxFQUFLSyxPQUNuQkosRUFBS0gsT0FBU0UsRUFBS0YsT0FDbkJHLEVBQUsyQixNQUFRNUIsRUFBSzRCLE1BQ2xCM0IsRUFBS1osTUFBUSxHQUFJaUMsR0FBU3RCLEdBQzFCQyxFQUFLSixLQUFPLEdBQUkwQixJQUNWbEMsTUFBUVksRUFBS1osTUFDYlMsT0FBUUcsRUFBS0gsT0FDYjhCLE1BQU8zQixFQUFLMkIsUUFFbEIzQixFQUFLSixLQUFLVSxPQUFPQyxLQUFLLFdBQ2xCUCxFQUFLNEIsaUJBQW1CLEdBQUlMLElBQ3RCTyxJQUFLOUIsRUFBS0osS0FBS2tDLElBQ2ZDLFVBQVcvQixFQUFLWixNQUFNNEMsV0FBV0QsWUFFdkMvQixFQUFLaUMsbUJBQXFCLEdBQUlULElBQ3hCNUIsS0FBUUksRUFBS0osS0FDYmtDLElBQVE5QixFQUFLSixLQUFLa0MsSUFDbEIxQyxNQUFRWSxFQUFLWixNQUNiMkMsVUFBVy9CLEVBQUtaLE1BQU00QyxXQUFXRCxVQUNqQ0csZUFBZ0JsQyxFQUFLSSxPQUFPK0IsV0FFbENuQyxFQUFLWSxTQUFTWixFQUFLSixLQUFNLFVBQVcsU0FBU3dDLEdBQ3pDcEMsRUFBS3FDLGlCQUFpQkQsR0FDdEJwQyxFQUFLNEIsaUJBQWlCVSxnQkFBZ0J0QyxFQUFLSixLQUFLd0MsZUFFcERwQyxFQUFLSixLQUFLUyxXQUVkeEIsRUFBRTBELEtBQUtDLE1BQU0sTUFBTXhDLEVBQUtaLE1BQU1rQixPQUFRTixFQUFLSixLQUFLVSxTQUFTQyxLQUFLLFdBQzFEUCxFQUFLRSxLQUFLZSxRQUFRakIsTUFHeEJxQyxpQkFBbUIsU0FBU0QsR0FDMUIsR0FBSXBDLEdBQU9DLElBQ1huQixHQUFFMEIsUUFBUTRCLEVBQWEsU0FBU0ssR0FDNUJ6QyxFQUFLWSxTQUFTNkIsRUFBV3JELE1BQU8sU0FBVSxTQUFTdUIsR0FDL0NYLEVBQUswQyxhQUFhRCxFQUFXRSxZQUM3QixJQUFJQyxHQUFTNUMsRUFBSzZDLGdCQUFnQkosRUFBV0UsWUFBYSxXQUMzQyxRQUFYQyxHQUNBNUMsRUFBSzRCLGlCQUFpQmtCLG9CQUFvQkYsRUFBT0csY0FFekQvQyxFQUFLWSxTQUFTNkIsRUFBV3JELE1BQU8sU0FBVSxTQUFTdUIsR0FDL0NYLEVBQUtnRCxlQUFlUCxFQUFXRSxZQUMvQixJQUFJQyxHQUFTNUMsRUFBSzZDLGdCQUFnQkosRUFBV0UsWUFBYSxXQUMzQyxRQUFYQyxHQUNBNUMsRUFBSzRCLGlCQUFpQmtCLG9CQUFvQkYsRUFBT0csY0FFekQvQyxFQUFLWSxTQUFTNkIsRUFBWSxRQUFTLFNBQVNRLEdBQ3hDakQsRUFBSzBDLGFBQWFPLEdBQ2xCUixFQUFXckQsTUFBTTJCLFFBQVEsU0FBVTBCLEVBQVdyRCxTQUVsRFksRUFBS1ksU0FBUzZCLEVBQVcsWUFBYSxTQUFTUSxHQUN0Q2pELEVBQUtKLEtBQUtrQyxJQUFJb0IsYUFDZkMsVUFBVUMsUUFBUUMsVUFBVUMsZUFDaENELFVBQVVFLGtCQUlwQlYsZ0JBQWtCLFNBQVNXLEVBQUlDLEdBQzdCLEdBQUlDLEdBQWdCQyxDQUNwQixJQUFJSCxZQUFlSSxHQUFFQyxZQUNqQixHQUFJSixJQUFVRCxHQUNWRSxFQUFpQkYsTUFHakIsS0FEQUcsRUFBU0gsRUFBSU0sWUFDTk4sRUFBTUcsRUFBT0ksT0FDaEIsR0FBSU4sSUFBVUQsR0FBSyxDQUNmRSxFQUFpQkYsQ0FDakIsWUFJTDFFLEdBQUVrRixJQUFJUixFQUFLLG1CQUNsQkUsRUFBaUJGLEVBQUlTLE9BRXpCLE9BQU9QLElBRVRoQixhQUFjLFNBQVNjLEdBQ3JCLEdBQUlFLEdBQWlCekQsS0FBSzRDLGdCQUFnQlcsRUFBSyxZQUMxQ0UsSUFDTEEsRUFBZUgsYUFFakJQLGVBQWdCLFNBQVNRLEdBQ3ZCLEdBQUlFLEdBQWlCekQsS0FBSzRDLGdCQUFnQlcsRUFBSyxjQUMxQ0UsSUFDTEEsRUFBZVEsZUFFakJDLGNBQWUsU0FBU1gsR0FDdEIsR0FBSUUsR0FBaUJ6RCxLQUFLNEMsZ0JBQWdCVyxFQUFLLGFBQzFDRSxJQUNMQSxFQUFlVSxlQUl2QixPQURBdEYsR0FBRUssT0FBT3VDLEVBQWNOLFVBQVU1QixHQUMxQmtDO0FDcEhYOUMsT0FBTyx5QkFDRCxhQUNBLFlBQ0gsU0FBU0UsRUFBRUMsR0FDVixZQUNBLElBQUlRLEdBQWEsV0FDYlUsS0FBS29FLElBQU12RixFQUFFd0YsU0FBUyxjQUN0QnJFLEtBQUtILFdBQVcwQyxNQUFNdkMsS0FBTXNFLFdBU2hDLE9BUEFoRixHQUFXSixPQUFTSixFQUFTeUYsT0FBT3JGLE9BQ3BDTCxFQUFFSyxPQUFPSSxFQUFXNkIsVUFBV3JDLEVBQVMwRixRQUN4QzNGLEVBQUVLLE9BQU9JLEVBQVc2QixXQUNoQnRCLFdBQVksV0FDUixLQUFNLElBQUk0RSxPQUFNLGlDQUdqQm5GO0FDakJYWCxPQUFPLCtCQUNELFVBQ0EsTUFDSCxTQUFVZ0YsRUFBRWUsR0FDWCxNQUFJZixHQUFFZ0IsUUFBUUMsU0FBaUJqQixHQUMvQkEsRUFBRWdCLFFBQVFDLFNBQVdqQixFQUFFZ0IsUUFBUXpGLFFBQ3pCMkYsU0FDTUMsWUFBYyxPQUNkQyxPQUFjLElBQ2RDLE1BQWMsSUFDZEMsUUFBZ0JDLEtBQU0sRUFBR0MsTUFBTyxFQUFHQyxJQUFLLEdBQUlDLE9BQVEsR0FDcERDLFdBQWMsRUFDZEMsTUFBZUMsVUFBVSxHQUN6QkMsR0FBYyxLQUNkQyxNQUFjLFdBQ2RDLFNBQWMsV0FFcEI5RixXQUFhLFNBQVNnQyxFQUFLK0QsRUFBUWYsR0FDakMsR0FBSTlFLEdBQU9DLElBQ1gyRCxHQUFFa0MsS0FBS0MsV0FBVzlGLEtBQU02RSxHQUN4QjdFLEtBQUsrRixLQUFPbEUsRUFDWjdCLEtBQUtnRyxRQUFVSixDQUNmLElBQUlLLEdBQVlqRyxLQUFLa0csV0FBYXZDLEVBQUV3QyxRQUFRQyxPQUFPLE1BQU0sMkNBQ3pELElBQUlwRyxLQUFLNkUsUUFBUVMsVUFBVyxDQUN4QjNCLEVBQUV3QyxRQUFRRSxTQUFTSixFQUFXLHFDQUM5QixJQUFJSyxHQUFTdEcsS0FBS3VHLFFBQVU1QyxFQUFFd0MsUUFBUUMsT0FBTyxJQUFLLGtDQUFtQ0gsRUFDckZLLEdBQU9aLE1BQVExRixLQUFLNkUsUUFBUWEsTUFDNUJZLEVBQU9FLEtBQU8sR0FDZCxJQUFJQyxHQUFTLFdBQWExRyxFQUFLMkcsVUFDM0IvQyxHQUFFZ0QsUUFBUUMsTUFDVmpELEVBQUVrRCxTQUNHcEIsR0FBR2EsRUFBUSxRQUFTM0MsRUFBRWtELFNBQVNDLE1BQy9CckIsR0FBR2EsRUFBUSxRQUFTRyxFQUFRekcsTUFFakMyRCxFQUFFa0QsU0FBU3BCLEdBQUdhLEVBQVEsUUFBU0csT0FHbkM5QyxHQUFFd0MsUUFBUUUsU0FBU0osRUFBVyxvQ0FPbEMsT0FMS3RDLEdBQUVnRCxRQUFRQyxNQUdYakQsRUFBRWtELFNBQVNwQixHQUFHekYsS0FBS2tHLFdBQVksUUFBU3ZDLEVBQUVrRCxTQUFTRSxpQkFGbkRwRCxFQUFFa0QsU0FBU0csd0JBQXdCaEgsS0FBS2tHLFlBSXJDRCxHQUVUZ0IsU0FBVSxhQUdWQyxNQUFPLFNBQVNyRixHQUNkLE1BQU83QixNQUFLa0csWUFFZFEsUUFBUyxXQUNQLEdBQUkzRyxHQUFPQyxJQUNYLEtBQUlELEVBQUtvSCxZQUNUcEgsRUFBS29ILFdBQVksRUFDakJuSCxLQUFLK0YsS0FBS04sR0FBRyxRQUFTekYsS0FBS29ILFVBQVdwSCxNQUV0QzJELEVBQUV3QyxRQUFRa0IsWUFBWXJILEtBQUtrRyxXQUFZLHNDQUN2Q3ZDLEVBQUV3QyxRQUFRRSxTQUFTckcsS0FBS2tHLFdBQVksc0NBRWhDbEcsS0FBS3NILFdBQVQsQ0FFQSxHQUFJQyxHQUFjdkgsS0FBSzZFLFFBQVFFLE9BQVMvRSxLQUFLNkUsUUFBUUksT0FBT0csSUFBUXBGLEtBQUs2RSxRQUFRSSxPQUFPSSxPQUNwRm1DLEVBQWN4SCxLQUFLNkUsUUFBUUcsTUFBU2hGLEtBQUs2RSxRQUFRSSxPQUFPRSxNQUFRbkYsS0FBSzZFLFFBQVFJLE9BQU9DLEtBS3BGdUMsR0FIU3pILEtBQUswSCxRQUFVaEQsRUFBR2lELE1BQU1DLFNBQ2hDQyxPQUFPLEVBQUVMLElBRUR4SCxLQUFLOEgsUUFBVXBELEVBQUdpRCxNQUFNQyxTQUNoQ0csUUFBUS9ILEtBQUtnRyxRQUFRZ0MsTUFBTWhJLEtBQUtnRyxRQUFRaUMsTUFDeENKLE9BQU8sRUFBRU4sS0FFVlcsRUFBV2xJLEtBQUtzSCxVQUFZNUMsRUFBR3lELE9BQU8sNkJBQ3JDQyxPQUFPLE9BQ1BDLEtBQUssS0FBTSxZQUNYQSxLQUFLLFNBQVVySSxLQUFLNkUsUUFBUUUsUUFDNUJzRCxLQUFLLFFBQVNySSxLQUFLNkUsUUFBUUcsT0FFNUJzRCxFQUFPSixFQUFTRSxPQUFPLEtBQ3RCQyxLQUFLLEtBQUssUUFDVkEsS0FBSyxRQUFVYixFQUFXLEVBQUl4SCxLQUFLNkUsUUFBUUksT0FBT0UsT0FDbERrRCxLQUFLLFNBQVVkLEdBQ2ZjLEtBQUssWUFDQSxhQUFlLElBQUliLEVBQWEsSUFBTXhILEtBQUs2RSxRQUFRSSxPQUFPRyxJQUFPLG9CQW1CdkVtRCxHQWZRRCxFQUFLRSxVQUFVLEtBQ3RCQyxLQUFLekksS0FBS2dHLFFBQVEwQyxZQUNsQkMsUUFBUVAsT0FBTyxRQUNmQyxLQUFLLFFBQVEsaUJBQ2JBLEtBQUssU0FBVSxTQUFTTyxHQUNyQixNQUFPbEUsR0FBR21FLEtBQ0o5SSxFQUFLOEUsUUFBUVUsS0FBS0MsVUFDbEJpQyxFQUFPbUIsRUFBRUUsZ0JBR2xCVCxLQUFLLFFBQVFiLEdBQ2JhLEtBQUssWUFBYSxTQUFTTyxHQUN4QixNQUFPLGdCQUFrQm5CLEVBQU9tQixFQUFFWixPQUFTLE1BR3ZDaEksS0FBSytJLE9BQVNyRSxFQUFHc0UsSUFBSVQsUUFDNUJVLEVBQUV4QixHQUNGaEMsR0FBRyxXQUFZLFdBQ1osR0FBSXlELEdBQVd6QixFQUFPYyxFQUFNWSxTQUFTLElBQ2pDQyxFQUFXM0IsRUFBT2MsRUFBTVksU0FBUyxJQUNqQ0UsR0FDRUMsT0FBTyxFQUNQQyxZQUVGTCxLQUFhRSxFQUNiMUUsRUFBR3lELE9BQU8sU0FBU0ssVUFBVSxzQkFBc0JnQixLQUFLLFNBQVNDLEdBQ3hEaEMsRUFBT2dDLEVBQUV6QixRQUFVb0IsR0FBWTNCLEVBQU9nQyxFQUFFeEIsTUFBVWlCLEdBQ25ERyxFQUFRRSxTQUFTRyxLQUFLRCxLQUc5QkosRUFBUUMsT0FBUSxFQUVwQnZKLEVBQUs4RSxRQUFRWSxHQUFHa0UsU0FBU04sTUFHN0JPLEVBQVN0QixFQUFLRixPQUFPLE9BQ3BCQyxLQUFLLEtBQUssU0FDVndCLEtBQUt0QixFQUNWcUIsR0FBT3BCLFVBQVUsUUFDWkgsS0FBSyxRQUFRYixFQUVsQixJQUFJc0MsR0FBUTVCLEVBQVNFLE9BQU8sS0FDdkJDLEtBQUssS0FBSyxRQUNWQSxLQUFLLFlBQVksY0FBaUIsSUFBSWIsRUFBY3hILEtBQUs2RSxRQUFRSSxPQUFPQyxNQUFRLElBQU1sRixLQUFLNkUsUUFBUUksT0FBT0csSUFBTyxLQUVsSDJFLEVBQU9yRixFQUFHc0UsSUFBSWUsT0FDYnBDLE1BQU1GLEdBQ051QyxPQUFPaEssS0FBSzZFLFFBQVFDLGFBQ3BCbUYsU0FBUyxFQUFHLEdBQ1pDLFdBQVdsSyxLQUFLZ0csUUFBUWtFLGNBQ3hCQyxXQUFXLFNBQVM1RSxHQUNqQixNQUFPeEYsR0FBS2lHLFFBQVFtRSxXQUFXNUUsSUFFdkN1RSxHQUFNRCxLQUFLRSxLQUViM0MsVUFBWSxXQUNMcEgsS0FBS21ILGFBQ0xuSCxLQUFLNkUsUUFBUVksR0FBRzJFLFVBQWdELGtCQUE3QnBLLE1BQUs2RSxRQUFRWSxHQUFHMkUsV0FDcERwSyxLQUFLNkUsUUFBUVksR0FBRzJFLFdBRXBCcEssS0FBS21ILFdBQVksRUFDakJ4RCxFQUFFd0MsUUFBUUUsU0FBU3JHLEtBQUtrRyxXQUFZLHNDQUNwQ3ZDLEVBQUV3QyxRQUFRa0IsWUFBWXJILEtBQUtrRyxXQUFZLHFDQUN2Q2xHLEtBQUsrRixLQUFLc0UsSUFBSSxRQUFTckssS0FBS29ILFVBQVdwSCxlQUcvQzJELEVBQUUyRyxRQUFRcEMsU0FBVyxTQUFTckcsRUFBSStELEVBQU9mLEdBQ3JDLE1BQU8sSUFBSWxCLEdBQUVnQixRQUFRQyxTQUFTL0MsRUFBSStELEVBQU9mO0FDMUpqRGxHLE9BQU8sb0JBQ0gsU0FDQSxjQUNELFNBQVNDLEVBQUVDLEdBQ1YsWUFDQSxJQUFJVSxJQUNFVSxLQUFNLEtBQ05JLEtBQU0sV0FDSixNQUFPTCxNQUFLQyxLQUFLc0ssV0FHekIsT0FBT2hMO0FDWFhaLE9BQU8scUJBQ0gsVUFDRCxTQUFTQyxHQUNSLFlBQ0EsSUFBSTRMLElBQ0FDLFNBQVcsU0FBU0MsRUFBR0MsRUFBSTFLLEdBQ3ZCLElBQUswSyxFQUFLLEtBQU0sOEJBQ2hCLElBQXNCLElBQWxCL0wsRUFBRStMLEdBQUtDLE9BQWMsQ0FDckIsR0FBSUMsR0FBSSxXQUNBak0sRUFBRStMLEdBQUtDLE9BQVMsSUFDaEJoTSxFQUFFa00sU0FBU0MsTUFBTVYsSUFBSSxrQkFBbUJRLEdBQ3hDNUssRUFBS2UsV0FHYnBDLEdBQUVrTSxTQUFTQyxNQUFNdEYsR0FBRyxrQkFBbUJvRixHQUN2Q0csT0FBT0MsV0FBVyxXQUNkck0sRUFBRWtNLFNBQVNDLE1BQU1WLElBQUksa0JBQW1CUSxHQUN4QzVLLEVBQUtpQixVQUNOd0osT0FFSHpLLEdBQUtlLFdBSWpCLE9BQU93SjtBQ3hCWDdMLE9BQU8sbUJBQ0gsVUFDRCxTQUFTQyxHQUNSLFlBQ0EsSUFBSXNNLElBS0FDLFNBQVcsU0FBU3ZLLEdBQ2hCLEdBQUl3SyxHQUFPeE0sRUFBRXNCLFVBWWIsT0FYQXRCLEdBQUV5TSxNQUNFQyxLQUFVLE1BQ1YxSyxJQUFVQSxFQUNWMkssU0FBVSxNQUNWQyxRQUFTLFNBQVMvQyxHQUNiMkMsRUFBS3BLLFFBQVF5SCxJQUVsQmdELE1BQU8sU0FBU0MsRUFBT0MsRUFBWUMsR0FDL0JSLEVBQUtsSyxPQUFPeUssTUFHYlAsRUFBS2IsV0FHcEIsT0FBT1c7QUN6Qlh2TSxPQUFPLG1CQUNILFNBQ0EsY0FDRCxTQUFTQyxFQUFFQyxHQUNWLFlBQ0EsSUFBSWdOLElBQ0FDLEtBQU0sU0FBU0MsR0FDWCxHQUFJQyxFQUNKLElBQW1CLGdCQUFSRCxHQUNQQyxHQUFTLEdBQUlDLFlBQVlDLGdCQUFnQkgsRUFBSSxnQkFDMUMsQ0FBQSxLQUFJQSxZQUFlSSxXQUd0QixLQUFNLElBQUkxSCxPQUFNLDBDQUZoQnVILEdBQVNELEVBSWIsR0FBYyxNQUFWQyxJQUFvQkEsRUFBT0ksZUFBZSx5QkFBMkJKLEVBQU9LLHFCQUFxQixlQUFlekIsT0FBUyxFQUN6SCxLQUFNLElBQUluRyxPQUFNLHVDQUVwQixPQUFPdUgsSUFHWE0sU0FBVSxTQUFTUCxFQUFJUSxFQUFJQyxFQUFPQyxHQUM5QixHQUFJVCxHQUFTaE0sS0FBSzhMLEtBQUtDLEdBQ25CVyxFQUFTMU0sS0FBSzhMLEtBQUtTLEdBQ25CSSxFQUFnQixHQUFJQyxjQUN4QkQsR0FBY0UsaUJBQWlCSCxHQUNULGdCQUFYRixJQUNQM04sRUFBRTJLLEtBQUszSyxFQUFFaU8sS0FBS04sR0FBUyxTQUFTTyxHQUM1QkosRUFBY0ssYUFBYSxLQUFLRCxFQUFJUCxFQUFPTyxLQUduRCxJQUFJRSxFQUNKLEtBQ0ksR0FBSUMsR0FBTVAsRUFBY1Esb0JBQW9CbkIsRUFJcENpQixHQUhzQyxJQUExQ0csVUFBVUMsVUFBVUMsUUFBUSxXQUVmLFNBQVRiLEVBQ1NTLEVBQUlLLGdCQUFnQkMsWUFFcEJOLEVBQUlLLGdCQUdKLFNBQVRkLEVBQ1NTLEVBQUlLLGdCQUFnQkMsWUFFcEJQLEVBQVNDLEVBQUluQyxLQUFLMEMsVUFHckMsTUFBT0MsR0FDTCxLQUFNLElBQUlqSixPQUFNLDRCQUE4QmlKLEVBQUVDLFlBRXBELE1BQU9WLElBR2YsT0FBT3BCO0FDdERYbE4sT0FBTyxrQkFDRCxTQUNBLGFBQ0EsV0FDQSxrQkFDQSxtQkFDQSxrQkFDQSx1QkFDQSwyQkFDQSxvQkFDQSxvQkFDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTb00sRUFBUzNMLEVBQVVzTSxFQUFTK0IsRUFBV0MsRUFBY0MsRUFBZUMsR0FDekYsWUFDQSxJQUFJaFAsR0FBZUQsRUFBU2tQLE1BQU05TyxRQUM5QlcsV0FBWSxXQUNSLEdBQUlFLEdBQU9DLElBQ1hELEdBQUtFLEtBQU9yQixFQUFFc0IsVUFDZCxLQUNJLEdBQUlrTCxHQUFPckwsRUFBS29MLFNBQVNwTCxFQUFLUyxJQUFJLFFBQ2xDNUIsR0FBRTBELEtBQUs4SSxHQUFNOUssS0FBSyxTQUFTbUksR0FDdkIxSSxFQUFLa08sSUFBSSxNQUFPeEYsR0FDaEIxSSxFQUFLbU8sYUFDTG5PLEVBQUtvTyxnQkFDRHBPLEVBQUtxTyxTQUNMck8sRUFBS2tPLElBQUksWUFBYWxPLEVBQUtxTyxRQUFRQyxXQUFXQyxPQUM5Q3ZPLEVBQUtFLEtBQUtlLFFBQVFqQixJQUVsQkEsRUFBS0UsS0FBS2lCLFdBRWZxTixLQUFLLFNBQVM1QyxHQUNiLEdBQUlvQyxJQUNBNU8sTUFBTyxHQUFJMk8sSUFDUFUsSUFBSywyQ0FBNkN6TyxFQUFLUyxJQUFJLFFBQVUsTUFBUW1MLE1BR3JGNUwsRUFBS0UsS0FBS2lCLFdBRWhCLE1BQU93TSxHQUNMM04sRUFBS0UsS0FBS2lCLFNBQ1YsR0FBSTZNLElBQ0E1TyxNQUFPLEdBQUkyTyxJQUNQVSxJQUFLZCxFQUFFQyxpQkFLdkJjLFVBR00xQyxJQUFjLEtBQ2QyQyxVQUFjLEtBQ2RDLFFBQWMsR0FDZEMsZUFFTlIsUUFBUyxLQUNUUyxXQUFZLFdBR1IsTUFGcUIsUUFBakI3TyxLQUFLb08sU0FDTHBPLEtBQUtrTyxhQUNGbE8sS0FBS29PLFNBRWhCRixXQUFZLFdBQ1IsR0FBSW5PLEdBQU9DLElBQ1gsS0FDSSxHQUFJOE8sR0FBYTlPLEtBQUtzTSxTQUFTdE0sS0FBS1EsSUFBSSxPQUFRb04sS0FBZ0IsT0FDaEU1TixNQUFLb08sUUFBVVcsS0FBS0MsTUFBTUYsR0FDNUIsTUFBT3BCLEdBQ0wsR0FBSUssSUFDQTVPLE1BQU8sR0FBSTJPLElBQ1BVLElBQUssMkNBQ0x6TyxFQUFLUyxJQUFJLFFBQVUsTUFBUWtOLEVBQUVDLGlCQUs3Q1EsY0FBZSxXQUNYLElBQ0ksR0FBSVcsR0FBYTlPLEtBQUtzTSxTQUFTdE0sS0FBS1EsSUFBSSxPQUFRcU4sS0FBbUIsT0FDbkU3TixNQUFLaU8sSUFBSSxhQUFjYyxLQUFLQyxNQUFNRixJQUNwQyxNQUFPcEIsR0FDTCxLQUFNLElBQUlqSixPQUFNLHFDQUF1Q2lKLEVBQUVDLGVBT3JFLE9BSEE5TyxHQUFFSyxPQUFPSCxFQUFhb0MsVUFBVStKLEdBQ2hDck0sRUFBRUssT0FBT0gsRUFBYW9DLFVBQVU1QixHQUNoQ1YsRUFBRUssT0FBT0gsRUFBYW9DLFVBQVUwSyxHQUN6QjlNO0FDdEZYSixPQUFPLGdCQUNELFNBQ0EsYUFDQSxXQUNBLGlCQUNBLHVCQUNBLG9CQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNDLEVBQWFrUSxFQUFrQjFQLEdBQ3BELFlBQ0EsSUFBSUUsR0FBYVgsRUFBU2tQLE1BQU05TyxRQUM1QlcsV0FBWSxTQUFTQyxHQUNqQixHQUFJQyxHQUFVQyxJQUNkRCxHQUFLRSxLQUFTckIsRUFBRXNCLFVBQ2hCLElBQUlnUCxHQUFVcFAsRUFBS0ssT0FBT2dQLFNBQVNDLFFBQzlCRixHQUFPRyxNQUFNLFNBQVFILEdBQVUsSUFDcEMsSUFBSUksR0FBVXhQLEVBQUtLLE9BQU9nUCxTQUFTRyxNQUMvQkMsRUFBVSxHQUFJTixFQUNsQmxQLEdBQUtJLE9BQVNMLEVBQUtLLE9BQ25CSixFQUFLa08sSUFBSSxhQUFjc0IsRUFFdkIsSUFBSUosR0FBV3RRLEVBQUVnRCxJQUFJaEQsRUFBRWdKLE1BQU15SCxFQUFNMUUsUUFBUyxXQUFXLE1BQU80RSxTQUU5RDNRLEdBQUUySyxLQUFLOEYsRUFBTyxTQUFTRyxFQUFLaEcsR0FDeEIwRixFQUFTMUYsR0FBSyxHQUFJMUssSUFDZDJRLFVBQVlqRyxFQUNaa0csV0FBWVQsRUFDWlUsS0FBWVYsRUFBU08sS0FHN0IsSUFBSUksR0FBUWhSLEVBQUVnRCxJQUFJc04sRUFBVSxTQUFTek8sR0FBUyxNQUFPQSxHQUFRTCxRQUM3RHpCLEdBQUUwRCxLQUFLQyxNQUFNLEtBQUtzTixHQUFPdlAsS0FBSyxXQUMxQmlQLEVBQUlPLElBQUlYLEdBQ1JwUCxFQUFLZ1EsV0FDTGhRLEVBQUtFLEtBQUtlLFFBQVFqQixLQUNuQmtCLE9BQU8sV0FDTnBDLEVBQUUwQixRQUFRc1AsRUFBTyxTQUFTRyxHQUNHLGFBQXJCQSxFQUFTQyxTQUNUbFEsRUFBS0UsS0FBS2lCLFdBRWxCbkIsRUFBS0UsS0FBS2lCLFlBTWhCNk8sU0FBVSxXQUNSLEdBQUloUSxHQUFPQyxLQUNQa1EsRUFBWW5RLEVBQUtJLE9BQU9nUSxRQUFRQyxNQUNoQ0MsRUFBWXhSLEVBQUV5UixRQUFRelIsRUFBRTBSLFFBQ3hCMVIsRUFBRWdELElBQUlxTyxFQUFVLFNBQVNNLEdBQ3JCLE1BQU8zUixHQUFFZ0QsSUFBSTJPLEVBQU1sQixNQUFPLFNBQVNHLEdBQy9CLE1BQU9lLEdBQU1DLElBQUlDLE9BQU9qQixTQUloQ2tCLEVBQWtCTixFQUFVdk0sTUFDNUJzTSxJQUlKclEsR0FBS1MsSUFBSSxjQUFjRCxRQUFRLFNBQVNHLEVBQVErSSxHQUM1QyxHQUFJMkUsR0FBVzFOLEVBQVFtTyxlQUFpQlIsZUFDcENDLEVBQVFGLEVBQVFDLFdBQVdDLEtBQy9COEIsR0FBTTlCLEdBQVM4QixFQUFNOUIsSUFBVStCLEVBQVV2TSxPQUFTNk0sRUFDbERqUSxFQUFRdU4sSUFBSSxVQUFXbUMsRUFBTTlCLE9BT25Dc0MsV0FBWSxTQUFTbFEsR0FDbkIsR0FBSW1RLEdBQ0F0QixFQUFNdlAsS0FBS1EsSUFBSSxhQU1uQixPQUx1QixnQkFBWkUsR0FDUG1RLEVBQU1uUSxHQUNvQixnQkFBWkEsSUFBMkMsZ0JBQVpBLE1BQzdDbVEsRUFBTXRCLEVBQUl1QixHQUFHcFEsSUFFVm1RLElBSWYsT0FEQWhTLEdBQUVLLE9BQU9PLEVBQVcwQixVQUFVNUIsR0FDdkJFO0FDbkZYZCxPQUFPLGNBQ0QsU0FDQSxhQUNBLFdBQ0Esb0JBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU1MsR0FDckIsWUFDQSxJQUFJNkIsR0FBV3RDLEVBQVNrUCxNQUFNOU8sUUFDMUJXLFdBQVksU0FBU0MsR0FDakIsR0FBSUMsR0FBUUMsSUFDWkQsR0FBS0UsS0FBT3JCLEVBQUVzQixXQUNkdEIsRUFBRW1TLFFBQVFqUixFQUFLSyxPQUFPMEIsSUFBSTFCLE9BQVEsU0FBU3NJLEdBQ3ZDMUksRUFBS2tPLElBQUksWUFBYXhGLEdBQ3RCMUksRUFBS0UsS0FBS2UsUUFBUWpCLEtBQ25Cd08sS0FBSyxTQUFTeUMsRUFBT3JGLEVBQVlGLEdBQ2hDd0YsUUFBUUMsSUFBSSxtQ0FBcUN6RixHQUNqRDFMLEVBQUtFLEtBQUtpQixZQUdsQnVOLFVBQ0kzTSxlQUlSLE9BREFqRCxHQUFFSyxPQUFPa0MsRUFBU0QsVUFBVTVCLEdBQ3JCNkI7QUN4Qlh6QyxPQUFPLGlCQUNELFNBQ0EsYUFDQSxXQUNBLG9CQUNBLG1CQUNBLGNBQ0Esb0JBQ0Esa0JBQ0EsY0FDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTZ1AsRUFBZUMsRUFBY29ELEVBQVV6UixFQUFnQitCLEVBQWMyUCxHQUMxRixZQUNBLElBQUk3TSxHQUFTekYsRUFBU3lGLE9BQU9yRixRQUN2Qm1TLFNBQ0FsUixVQUNBbVIsZ0JBQWtCLEtBQ2xCQyxjQUFrQixLQUNsQjFSLFdBQVksU0FBUzJSLEdBQ25CLEdBQUl6UixHQUFVQyxJQUNkQSxNQUFLRyxPQUFTcVIsRUFBS3JSLE9BQ25CSCxLQUFLcVIsTUFBU0csRUFBS3JSLE9BQU9rUixNQUMxQnJSLEtBQUtzUixnQkFBa0IsR0FBSTVSLElBQ3JCRSxPQUFRSSxLQUNSRyxPQUFRSCxLQUFLRyxTQUVuQkgsS0FBS3NSLGdCQUFnQmpSLE9BQU9DLEtBQUssV0FFekJ6QixFQUFFa0YsSUFBSWhFLEVBQUtzUixNQUFNelIsT0FBTyxZQUFnQkcsRUFBS3NSLE1BQU16UixPQUFPNlIsU0FDMUQzUyxFQUFTMlMsUUFBUXpKLFdBSTNCbkgsU0FBVSxTQUFTNlEsRUFBUzdNLEdBQ3RCL0YsRUFBUzJTLFFBQVFDLFdBQWFBLEdBQ2xDNVMsRUFBUzJTLFFBQVE1USxTQUFTNlEsRUFBUzdNLElBRXJDOE0sS0FBTSxTQUFTQSxHQUNiLEdBQ0lDLEdBREE3UixFQUFPQyxLQUVQNlIsR0FBVSxDQUNkLEtBR0ksR0FGS0YsSUFBTUEsRUFBTzNSLEtBQUtxUixNQUFNUyxNQUM3QkYsRUFBYTVSLEtBQUtxUixNQUFNQSxNQUFNTSxHQUNYbkMsU0FBZm9DLEVBQTBCLEtBQU0sSUFBSW5OLE9BQU0saUNBQ2hELE1BQU9pSixHQUNMLE1BQU8xTixNQUFLMlIsS0FBSyxRQUVyQixHQUFJUixJQUFZL1EsU0FDaEJ2QixFQUFFMkssS0FBS29JLEVBQVksU0FBU0csR0FDeEIsR0FBSUMsR0FDQWxTLEdBQ0VLLE9BQVFKLEVBQUtJLE9BQ2J1QixNQUFRM0IsRUFBS3VSLGdCQUFnQm5TLE1BQzdCUyxPQUFRRyxHQUdWSSxFQUFTNE8sS0FBS0MsTUFBTUQsS0FBS2tELFVBQVVGLEdBQ3ZDLElBQUlsVCxFQUFFa0YsSUFBSTVELEVBQVEsUUFDZDZSLEVBQVc3UixFQUFPUixTQUNmLENBQUEsSUFBSWQsRUFBRWtGLElBQUk1RCxFQUFRLFdBSWxCLENBQUEsR0FBSXRCLEVBQUVrRixJQUFJbU8sTUFBTyxRQUVwQixZQURBbEgsT0FBT21ILFNBQVNDLEtBQU9qUyxFQUFPa1MsS0FBS1YsS0FHbkMsTUFBTSxJQUFJbE4sT0FBTSxvQ0FBc0NrTixHQVB0REssRUFBVyxnQkFDWDdSLEVBQU9tUyxRQUFRWCxLQUFPNVIsRUFBS3NSLE1BQU1qQyxTQUFXalAsRUFBT21TLFFBQVFYLEtBQzNEN1IsRUFBT2pCLEVBQUVLLE9BQU9ZLEVBQUtLLEVBQU9tUyxTQU9mLGNBQWJOLEdBQ0FqUyxFQUFLd1IsY0FBZ0IsR0FBSTlQLEdBQWMzQixHQUN2QytSLEdBQVUsR0FFVlUsU0FBU1AsR0FBVyxTQUFTUSxHQUN6QixHQUFJQyxHQUFJLEdBQUlELEdBQUsxUyxFQUNqQjJTLEdBQUVyUyxhQUlUeVIsSUFBUzlSLEVBQUt3UixjQUFnQixPQUVyQzdRLFFBQVUsU0FBU2dTLEdBQ2pCLEdBQUkzUyxHQUFPQyxLQUNQRixHQUNFSyxPQUFRSixFQUFLSSxPQUNidUIsTUFBUTNCLEVBQUt1UixnQkFBZ0JuUyxNQUM3QlMsT0FBUUcsRUFFVm5CLEdBQUUsY0FBY2dNLE9BQVMsR0FDekJoTSxFQUFFLGNBQWMrVCxTQUVoQi9ULEVBQUUsU0FBU2dNLE9BQVMsR0FDcEJoTSxFQUFFLFNBQVMrVCxTQUVZLE9BQXZCNVMsRUFBS3dSLGdCQUNMeFIsRUFBS3dSLGNBQWdCLEdBQUk5UCxHQUFjM0IsSUFFTixJQUFqQ2xCLEVBQUUsU0FBU2dVLFdBQVdoSSxRQUN0QixHQUFJd0csR0FBU3RSLEdBQU1NLFNBSXZCTCxFQUFLd1IsY0FBY2xSLE9BQU9DLEtBQUssV0FDM0IsR0FBSUksR0FBVVgsRUFBS3VSLGdCQUFnQm5TLE1BQU15UixXQUFXOEIsRUFDcERoUyxHQUFRSSxRQUFRLFNBQVVKLE9BSXRDLE9BQU82RDtBQzVHWDVGLE9BQU8sYUFDSCxTQUNBLGFBQ0EsWUFDRCxTQUFTQyxFQUFFQyxFQUFFQyxHQUNaLFlBQ0EsSUFDSStULEdBQVUvVCxFQUFTMFQsS0FBS3RULFFBQ3hCNFQsR0FBSSxPQUNKalQsV0FBWSxXQUVSakIsRUFBRW9NLFFBQVErSCxPQUFPLFdBQ2JqSSxTQUFTcUgsU0FBU2EsYUFJOUIsT0FBT0g7QUNoQlhsVSxPQUFPLGlCQUNELFNBQ0EsYUFDQSxXQUNBLHdCQUNBLGtCQUNBLHdCQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNtVSxFQUFZcEgsRUFBU1UsR0FDMUMsWUFDQSxJQUFJMkcsR0FBY3BVLEVBQVMwVCxLQUFLdFQsUUFDNUJ3VCxHQUFJLFVBQ0o3UyxXQUFZLFNBQVNDLEdBQ2pCLEdBQUlDLEdBQU9DLElBQ1hELEdBQUtJLE9BQVNMLEVBQUtLLFFBRXZCQyxPQUFRLFdBQ0osR0FBSUwsR0FBT0MsSUFFWCxJQURBRCxFQUFLb1QsSUFBTXZVLEVBQUUsSUFBTW1CLEVBQUsyUyxJQUMyQixJQUEvQzNTLEVBQUtvVCxJQUFJQyxLQUFLLElBQU1yVCxFQUFLWixNQUFNaUYsS0FBS3dHLE9BQXhDLENBRUEsR0FBSXlJLEdBQU9yVCxLQUFLc00sU0FDWnRNLEtBQUtiLE1BQU1xQixJQUFJLE9BQVErTCxHQUN0QitHLGNBQWV2VCxFQUFLSSxPQUFPZ1AsU0FBU0MsU0FDbkNULFFBQWU1TyxFQUFLWixNQUFNcUIsSUFBSSxXQUM5QjRELElBQWVyRSxFQUFLWixNQUFNaUYsS0FHaEMsS0FDSXhGLEVBQUUsb0JBQW9CK1QsU0FDdEIvVCxFQUFFLElBQUlvQixLQUFLMFMsSUFBSXRLLE9BQU9pTCxHQUN4QixNQUFPM0YsR0FDTHVELFFBQVFDLElBQUksdUJBQXlCeEQsRUFBRUMsWUFXM0MsTUFUSy9PLEdBQUUsc0JBQXNCZ00sT0FBUyxHQUNsQyxHQUFJcUksSUFBYzdTLFVBRWxCeEIsRUFBRSxXQUFXK1QsU0FDYi9ULEVBQUUsV0FBV3lJLFlBQVksaUJBQWlCaEIsU0FBUyxjQUV2RHRHLEVBQUtvVCxJQUFJQyxLQUFLLG1CQUFtQkcsTUFBTSxTQUFTOUosRUFBRStKLEdBQzlDelQsRUFBS1osTUFBTTJCLFFBQVEsU0FBVWYsRUFBS1osU0FFL0JZLElBRVg0UyxPQUFRLGNBR1osT0FEQTlULEdBQUVLLE9BQU9nVSxFQUFZL1IsVUFBVTBLLEdBQ3hCcUg7QUMvQ1h2VSxPQUFPLGVBQ0gsU0FDQSxhQUNBLFlBQ0QsU0FBU0MsRUFBRUMsRUFBRUMsRUFBUzJVLEdBQ3JCLFlBQ0EsSUFBSXRDLEdBQVlyUyxFQUFTMFQsS0FBS3RULFFBQzFCNFQsR0FBSSxPQUNKMVMsT0FBUSxXQUNKeEIsRUFBRSxRQUFROFUsVUFHbEIsT0FBT3ZDO0FDWlh4UyxPQUFPLGVBQ0QsU0FDQSxhQUNBLFdBQ0EsMkJBQ0EsaUJBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBUzJVLEVBQUtQLEdBQzFCLFlBQ0EsSUFBSTFULEdBQVlWLEVBQVMwVCxLQUFLdFQsUUFDMUI0VCxHQUFZLFNBQ1phLFNBQVk5VSxFQUFFOFUsU0FBU0YsR0FDdkI1VCxXQUFZLFNBQVNDLEdBQ2pCLEdBQUlDLEdBQU9DLElBQ1hELEdBQUtJLE9BQVNMLEVBQUtLLFFBRXZCQyxPQUFRLFdBQ0pKLEtBQUttVCxJQUFJUixTQUNUL1QsRUFBRSxRQUFRd0osT0FBT3FMLElBRXJCMVMsY0FBZSxTQUFTTCxHQUNwQixHQUFJd1MsSUFDRS9ULE1BQVF1QixFQUNSUCxPQUFRSCxLQUFLYixNQUFNZ0IsT0FDbkJ1QixNQUFRMUIsS0FDUkosT0FBUUksS0FBS2IsTUFBTVMsU0FDdEJRLFdBR1gsT0FBT1o7QUM1QlhiLE9BQU8sYUFDRCxTQUNBLGFBQ0EsV0FDQSxVQUNBLHlCQUNBLGVBQ0EsbUJBQ0Esb0JBQ0Esb0JBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBUzZFLEVBQUVpUSxFQUFXQyxFQUFXdFUsRUFBVXVPLEVBQWVDLEdBQ3RFLFlBQ0EsSUFBSTFNLEdBQVV2QyxFQUFTMFQsS0FBS3RULFFBQ3RCd1QsR0FBUyxNQUNUb0IsUUFBUyxNQUNUM1IsZUFDQUwsYUFDQWpDLFdBQVksU0FBU0MsR0FDbkIsR0FBSUMsR0FBT0MsSUFDWEQsR0FBS0UsS0FBT3JCLEVBQUVzQixXQUNkSCxFQUFLWixNQUFRVyxFQUFLWCxNQUNsQlksRUFBSzJCLE1BQVE1QixFQUFLNEIsTUFDbEI5QyxFQUFFMEQsS0FBS0MsVUFBVXhDLEVBQUsyQixNQUFNckIsT0FBUU4sRUFBS1osTUFBTWtCLFNBQVNDLEtBQUssV0FFekQsR0FEQVAsRUFBSytCLFVBQVkvQixFQUFLWixNQUFNcUIsSUFBSSxlQUM1QjVCLEVBQUUsSUFBTW9CLEtBQUswUyxJQUFJOUgsT0FBUyxHQUMxQmhNLEVBQUUsSUFBTW9CLEtBQUswUyxJQUFJRSxXQUFXaEksT0FBUyxHQUN6QyxJQUVJLEdBREE3SyxFQUFLZ1UsWUFDRGhVLEVBQUtvQyxZQU1MLEtBQU0seUJBTE4sSUFBSTZSLEdBQWtCblYsRUFBRWdELElBQUk5QixFQUFLb0MsWUFBYSxTQUFTc0gsR0FBS0EsRUFBRXhKLE1BQzlEckIsR0FBRTBELEtBQUtDLFNBQVV5UixHQUFpQjFULEtBQUssV0FDbkNQLEVBQUtFLEtBQUtlLFFBQVFqQixLQUs1QixNQUFPMk4sR0FDTCxHQUFJSyxJQUNBNU8sTUFBTyxHQUFJMk8sSUFDUFUsSUFBS2QsRUFBRUMsbUJBTXpCb0csU0FBVyxXQUNULEdBQUloVSxHQUFPQyxJQUNYLElBQWdDLElBQTVCcEIsRUFBRSxJQUFNb0IsS0FBSzBTLElBQUk5SCxPQUFjLENBRy9CLEdBRkFoTSxFQUFFLFFBQVF3SixPQUFPd0wsR0FDakI3VCxFQUFLOEIsSUFBTSxHQUFJOEIsR0FBRXNRLElBQUlsVSxFQUFLK0IsVUFBVTRRLEdBQUkzUyxFQUFLK0IsVUFBVUQsS0FDbkQ5QixFQUFLK0IsVUFBVW5DLEtBQ2pCLElBQ0VJLEVBQUs4QixJQUFJcVMsUUFDTCxHQUFJdlEsR0FBRXdRLE9BQU9wVSxFQUFLK0IsVUFBVW5DLEtBQUt5VSxJQUFLclUsRUFBSytCLFVBQVVuQyxLQUFLMFUsS0FDMUR0VSxFQUFLK0IsVUFBVW5DLEtBQUsyVSxNQUV4QixNQUFPNUcsR0FDUCxHQUFJSyxJQUFlNU8sTUFBTyxHQUFJMk8sSUFDMUJVLElBQUssOENBQWdEZCxFQUFFQyxlQUkvRCxHQUFJaEssR0FBRTRRLFVBQVV4VSxFQUFLK0IsVUFBVTBTLFVBQVU1VCxJQUFLYixFQUFLK0IsVUFBVTBTLFVBQVVoRCxNQUFNaUQsTUFBTTFVLEVBQUs4QixLQUN4RixHQUFJOEIsR0FBRTJHLFFBQVEzQyxNQUFNNUgsRUFBSytCLFVBQVU2RixPQUFPOE0sTUFBTTFVLEVBQUs4QixLQUNyRDlCLEVBQUtvQyxZQUFjdEQsRUFBRWdELElBQUk5QixFQUFLMkIsTUFBTWxCLElBQUksY0FBY0MsT0FBUSxTQUFTQyxHQUNuRSxNQUFPLElBQUltVCxJQUNMMVUsTUFBWXVCLEVBQ1ptQixJQUFZOUIsRUFBSzhCLElBQ2pCQyxVQUFZL0IsRUFBSytCLGdCQUtqQzFCLE9BQVEsV0FDTixHQUFJTCxHQUFPQyxJQUNYRCxHQUFLZ1UsV0FDTGxWLEVBQUUwQixRQUFRUixFQUFLb0MsWUFBYSxTQUFTdVMsR0FBTUEsRUFBR3RVLFdBQzlDTCxFQUFLZSxRQUFRLFVBQVdmLEVBQUtvQyxlQUlyQyxPQURBdEQsR0FBRUssT0FBT21DLEVBQVFGLFVBQVU1QixHQUNwQjhCO0FDakZYMUMsT0FBTyxnQkFDRCxTQUNBLGFBQ0EsV0FDQSxvQkFDQSxtQkFDQSw0QkFDQSxtQ0FDQSxvQkFDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTZ1AsRUFBZUMsRUFBYzBGLEVBQUtrQixFQUFjcFYsR0FDckUsWUFDQSxJQUFJc1UsR0FBYS9VLEVBQVMwVCxLQUFLdFQsUUFDekJ5VSxTQUFVOVUsRUFBRThVLFNBQVNGLEdBQ3JCWCxHQUFJLEdBQ0pwUSxZQUFhLEtBQ2JiLElBQUssS0FDTEMsVUFBVyxLQUNYakMsV0FBWSxTQUFTQyxHQUNuQixHQUFJQyxHQUFPQyxJQUNYRCxHQUFLRSxLQUFPckIsRUFBRXNCLFdBQ2RILEVBQUs4QixJQUFNL0IsRUFBSytCLElBQ2hCOUIsRUFBSytCLFVBQVloQyxFQUFLZ0MsU0FDdEIsS0FFSSxHQURBL0IsRUFBSzZVLG1CQUNEN1UsRUFBSzJDLFlBR0wsS0FBTSxvQ0FGTjNDLEdBQUtFLEtBQUtlLFFBQVFqQixHQUl4QixNQUFPMk4sR0FDTCxHQUFJSyxJQUNBNU8sTUFBTyxHQUFJMk8sSUFDUFUsSUFBS2QsRUFBRUMsaUJBS3JCaUgsZ0JBQWtCLFdBQ2hCLEdBQUk3VSxHQUFVQyxLQUNWb08sRUFBVXBPLEtBQUtiLE1BQU0wUCxhQUNyQmdHLEVBQWE5VSxFQUFLK0IsVUFBVWdULFNBQVNDLElBQ3pDRixHQUFXbEcsUUFBVzNPLEtBQUtiLE1BQU1xQixJQUFJLFlBQWMsRUFDbkQsSUFBSXVVLEdBQU9wUixFQUFFb1IsS0FBS0YsRUFDbEI5VSxHQUFLMkMsWUFBY2lCLEVBQUVxUixRQUFRNUcsR0FDekI2RyxjQUFlLFNBQVVDLEVBQVM5UixHQUU5QixHQUFJK1IsR0FBUXhSLEVBQUV3UixNQUFNcFYsRUFBSytCLFVBQVVnVCxTQUFTSyxNQUM1Q0EsR0FBTUMsV0FDRnJWLEVBQUs0VCxVQUNEakUsVUFBWTNQLEVBQUtaLE1BQU1xQixJQUFJLGFBQzNCNE4sUUFBWXJPLEVBQUtaLE1BQU0wUCxnQkFHL0J6TCxFQUFVaVMsVUFBVUYsR0FJcEIvUixFQUFVa1Msb0JBQW9CLFNBQzlCbFMsRUFBVXFDLEdBQUcsUUFBUyxTQUFTekMsR0FDM0JqRCxFQUFLZSxRQUFRLFFBQVNrQyxLQUUxQkksRUFBVXFDLEdBQUcsWUFBYSxTQUFTekMsR0FDL0JqRCxFQUFLZSxRQUFRLFlBQWFrQyxNQUdsQ3VTLGFBQWMsU0FBVUwsRUFBU00sR0FDN0IsTUFBTzdSLEdBQUVoQixPQUFPNlMsR0FDVlQsS0FBY0EsRUFDZFUsWUFBZ0JQLEVBQVE3RyxXQUFXcUgsS0FDbkNoUSxNQUFld1AsRUFBUTdHLFdBQVdzSCxZQUFjLEdBQ2hEQyxRQUFjN1YsRUFBSytCLFVBQVVnVCxTQUFTYyxRQUN0Q0MsWUFBYzlWLEVBQUsrQixVQUFVZ1QsU0FBU2Usa0JBS3REelYsT0FBUSxXQUNOLEdBQUlMLEdBQU9DLElBQ1gsS0FDSSxJQUFJQSxLQUFLMEMsWUFFRixDQUNILEdBQUloQyxHQUFVWCxFQUFLWixNQUFNcUIsSUFBSSxPQUM3QixNQUFNLDhDQUNBRSxFQUFVLG1DQUpoQlYsS0FBSzBDLFlBQVkrUixNQUFNelUsS0FBSzZCLEtBTWxDLE1BQU82TCxHQUNMLEdBQUlLLElBQ0E1TyxNQUFPLEdBQUkyTyxJQUNQVSxJQUFLLDhCQUFnQ2QsRUFBRUMsa0JBTzNELE9BREE5TyxHQUFFSyxPQUFPMlUsRUFBVzFTLFVBQVU1QixHQUN2QnNVO0FDaEdYbFYsT0FBTyxjQUNELFNBQ0EsYUFDQSxXQUNBLDBCQUNBLG9CQUNBLHNCQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNnWCxFQUFTdEwsRUFBV3VMLEdBQ3pDLFlBQ0EsSUFBSTNFLEdBQVd0UyxFQUFTMFQsS0FBS3RULFFBQ3pCeVUsU0FBVTlVLEVBQUU4VSxTQUFTbUMsR0FDbkJwRCxHQUFTLE9BQ1RvQixRQUFTLE1BQ1RwUyxNQUFTLEtBQ1R2QixVQUNBTixXQUFZLFNBQVNDLEdBQ25CRSxLQUFLRyxPQUFTTCxFQUFLSyxPQUNuQkgsS0FBSzBCLE1BQVM1QixFQUFLNEIsT0FFdkJ0QixPQUFRLFdBQ0osR0FBSUwsR0FBT0MsSUFDWCxJQUEyQyxJQUF2Q3BCLEVBQUUsSUFBTW1CLEVBQUsyUyxJQUFJRSxXQUFXaEksT0FBaEMsQ0FDQSxHQUFJb0wsR0FBUWhXLEtBQUtHLE9BQU84VixLQUdwQkMsS0FFQUMsS0FDQUMsSUFDSnZYLEdBQUUySyxLQUFLd00sRUFBTyxTQUFTelEsR0FFbkIsR0FEQTRRLEVBQVU1USxFQUFLK00sU0FBVyxHQUNSLFNBQWQvTSxFQUFLK0YsS0FBaUIsQ0FDdEIsR0FBeUIseUJBQXBCL0YsRUFBSzhRLFdBR04sS0FBTSxJQUFJNVIsT0FBTSx3Q0FBMENjLEVBQUs4USxXQUYvREQsR0FBWTdRLEVBQUs4USxZQUFjdFcsRUFBSzJCLE1BQU1sQixJQUFJLGlCQU0xRDNCLEVBQUUySyxLQUFLM0ssRUFBRWlPLEtBQUtxSixHQUFZLFNBQVN2VixHQUMvQixHQUFJWCxHQUFPckIsRUFBRXNCLFVBQ2JxUyxVQUFTLFFBQVUzUixHQUFNLFNBQVMwVixHQUM5QkgsRUFBVXZWLEdBQU8vQixFQUFFOFUsU0FBUzJDLEdBQzVCclcsRUFBS2UsWUFFVGtWLEVBQVN4TSxLQUFLekosRUFBS3NLLFlBR3ZCLElBQUlnTSxHQUFVLEVBQ2QzWCxHQUFFMEQsS0FBS0MsTUFBTTNELEVBQUdzWCxHQUFVNVYsS0FBSyxXQUMzQnpCLEVBQUUwQixRQUFReVYsRUFBTyxTQUFTelEsRUFBS2tFLEdBQzNCLEdBQUk3SSxHQUFNMkUsRUFBSytNLFFBQ1hrRSxLQUNBQyxFQUFhLEdBQ2JDLElBQ2MsVUFBZG5SLEVBQUsrRixNQUFpQyxRQUFkL0YsRUFBSytGLEtBQzdCaUwsR0FBWUosRUFBVXZWLEdBQU0yRSxHQUNQLFNBQWRBLEVBQUsrRixPQUNaOEssRUFBWTdRLEVBQUs4USxZQUFZNVYsT0FBT0YsUUFBUSxTQUFTcEIsRUFBTXdYLEdBQ3ZELEdBR0lDLEdBSEF4RSxFQUFVN00sRUFBS0EsS0FBSzZNLEtBQUt5RSxRQUFRLEtBQU1GLEdBQ3ZDRyxFQUFVLEdBQUlmLElBQWlCNVcsTUFBTUEsSUFDckM4TixFQUFVNkosRUFBSTFXLFFBQVFnUyxLQUFNLElBQU1BLEdBR3RDLElBQXNCLGdCQUFYbkYsR0FDUDJKLEVBQU1oWSxFQUFFcU8sT0FDTCxDQUFBLEtBQUlBLFlBQWtCOEosVUFTekIsS0FBTSxJQUFJdFMsT0FBTSx3Q0FBMEN3SSxFQUFPVSxXQVJqRSxJQUF3QixTQUFwQlYsRUFBTytKLFNBQ1BKLEVBQU1oWSxFQUFFcU8sRUFBT1EsZUFDWixDQUFBLEdBQXdCLE9BQXBCUixFQUFPK0osU0FHZCxLQUFNLElBQUl2UyxPQUFNLDZDQUErQ3dJLEVBQU9VLFdBRnRFaUosR0FBTWhZLEVBQUVxTyxFQUFPZ0ssWUFPbkJMLEVBQUl2TyxLQUFLLGlCQUNUbU8sRUFBT0ksRUFBSXZPLEtBQUssa0JBQW9CdU8sRUFBSU0sUUFFeENWLEVBQU9JLEVBQUl4RCxLQUFLLEtBQUtzQyxRQUFVa0IsRUFBSU0sVUFHM0NSLEVBQVc3WCxFQUFFaU8sS0FBSzBKLEdBQ2xCRSxFQUFTUyxLQUFLLFNBQVNDLEVBQUVDLEdBQ3JCLE1BQU9ELEdBQUVFLGNBQWNELEtBRTNCeFksRUFBRTJLLEtBQUtrTixFQUFVLFNBQVMzSixHQUN0QjBKLEdBQWNELEVBQU96SixHQUFLLEdBQUdrSyxZQUVqQ1YsR0FBWUosRUFBVXZWLElBQ2xCMlcsTUFBT2hTLEVBQUtnUyxNQUNadkIsTUFBT1MsU0FJcEJlLEtBQUssV0FDSjVZLEVBQUUsSUFBTW1CLEVBQUsyUyxJQUFJZ0IsUUFBUXRMLE9BQU9ySSxFQUFLNFQsVUFBVTRDLFFBQVNBLElBRXhELElBQUlrQixHQUFXN1ksRUFBRXNCLFVBQ2pCdVgsR0FBU2xKLEtBQUssV0FDVnhPLEVBQUtLLFdBRVRMLEVBQUswSyxTQUFTLElBQUssSUFBTTFLLEVBQUsyUyxHQUFJK0UsS0FDbkNsSixLQUFLLFdBQ0osS0FBTSxJQUFJOUosT0FBTSw4QkFLNUIsT0FEQTVGLEdBQUVLLE9BQU9rUyxFQUFTalEsVUFBVXFKLEdBQ3JCNEc7QUM5R1h6UyxPQUFPLGNBQ0gsU0FDQSxhQUNBLFdBQ0Esb0JBQ0EsMkJBQ0QsU0FBU0MsRUFBRUMsRUFBRUMsRUFBUzBMLEVBQVdtSCxHQUNoQyxZQUNBLElBQUkrRixHQUFXNVksRUFBUzBULEtBQUt0VCxRQUN6QjRULEdBQUksT0FDSjFTLE9BQVEsV0FDSixHQUFJTCxHQUFPQyxLQUNQQyxFQUFPckIsRUFBRXNCLFVBQ2JELEdBQUt1WCxLQUFLLFdBQ041WSxFQUFFbUIsRUFBSytTLElBQUkxSyxPQUFPdUosS0FFdEIzUixLQUFLeUssU0FBUyxJQUFLMUssRUFBSytTLEdBQUc3UyxLQUluQyxPQURBcEIsR0FBRUssT0FBT3dZLEVBQVN2VyxVQUFVcUosR0FDckJrTjtBQ3BCWC9ZLE9BQU8saUJBQ0QsU0FDQSxhQUNBLFdBQ0Esb0JBQ0Esb0JBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBUzBMLEVBQVdqTCxHQUNoQyxZQUNBLElBQUlvWSxHQUFjN1ksRUFBUzBULEtBQUt0VCxRQUM1QjRULEdBQUksR0FDSm5CLEtBQU0sR0FDTjlSLFdBQVksU0FBUzJSLEdBQ2pCLEdBQUl6UixHQUFRQyxJQUNaRCxHQUFLK1MsR0FBT3RCLEVBQUtzQixHQUNqQi9TLEVBQUtFLEtBQU9yQixFQUFFc0IsV0FDZHFTLFNBQVMsUUFBVWYsRUFBS0csTUFBTyxTQUFTMEIsR0FDcEN0VCxFQUFLNFIsS0FBTzBCLEVBQ1p0VCxFQUFLRSxLQUFLZSxRQUFRakIsTUFHMUJLLE9BQVEsV0FDSixHQUFJTCxHQUFPQyxLQUNQNFgsRUFBWWhaLEVBQUVzQixVQUNsQkgsR0FBS00sT0FBT21YLEtBQUssV0FDYjVZLEVBQUVtQixFQUFLK1MsSUFBSTFLLE9BQU9ySSxFQUFLNFIsUUFFM0IzUixLQUFLeUssU0FBUyxJQUFLMUssRUFBSytTLEdBQUc4RSxLQUtuQyxPQUZBL1ksR0FBRUssT0FBT3lZLEVBQVl4VyxVQUFVcUosR0FDL0IzTCxFQUFFSyxPQUFPeVksRUFBWXhXLFVBQVU1QixHQUN4Qm9ZO0FDL0JYaFosT0FBTyx5QkFDRCxTQUNBLGFBQ0EsV0FDQSx3QkFDQSxrQ0FDQSxrQ0FDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTUSxFQUFXdVksRUFBb0JDLEdBQ3BELFlBQ0EsSUFBSXZXLEdBQXFCakMsRUFBV0osUUFDOUJTLEtBQVMsS0FDVEMsT0FBUyxLQUNUaUMsSUFBUyxLQUNUSSxlQUFpQixLQUNqQnBDLFdBQVksU0FBU0MsR0FDbkIsR0FBSUMsR0FBT0MsSUFDWEQsR0FBSzhCLElBQU0vQixFQUFLK0IsSUFDaEI5QixFQUFLSixLQUFPRyxFQUFLSCxLQUNqQkksRUFBS1osTUFBUVcsRUFBS1gsTUFDbEJZLEVBQUtrQyxlQUFpQm5DLEVBQUttQyxlQUMzQmxDLEVBQUtnWSxrQkFDRGxaLEVBQUVrRixJQUFJaEUsRUFBS2tDLGVBQWdCLGNBQWdCbEMsRUFBS2tDLGVBQWUrVixVQUFVQyxRQUN6RWxZLEVBQUtnWSxlQUFlck8sS0FBSyxHQUFJbU8sSUFDdkJLLE1BQVFuWSxFQUFLSixLQUFLd0MsWUFDbEJOLElBQVE5QixFQUFLSixLQUFLa0MsSUFDbEJDLFVBQVcvQixFQUFLWixNQUFNNEMsV0FBV0QsYUFHdkNqRCxFQUFFa0YsSUFBSWhFLEVBQUtrQyxlQUFnQixhQUFlbEMsRUFBS2tDLGVBQWVpRyxTQUFTK1AsUUFDdkVsWSxFQUFLZ1ksZUFBZXJPLEtBQUssR0FBSW9PLElBQ3ZCM1YsWUFBY3BDLEVBQUtKLEtBQUt3QyxZQUN4Qk4sSUFBYzlCLEVBQUtKLEtBQUtrQyxJQUN4QnNXLFdBQWNwWSxFQUFLWixNQUFNNEMsV0FBVzVCLFVBRzlDdEIsRUFBRTBCLFFBQVFSLEVBQUtnWSxlQUFnQixTQUFTSyxHQUNwQ3JZLEVBQUtZLFNBQVN5WCxFQUFlLFNBQVUsV0FDbkNyWSxFQUFLc1ksc0JBUWZBLGVBQWdCLFdBQ2QsR0FBSXRZLEdBQU9DLEtBQ1BzWSxLQUFXQyxJQUNmMVosR0FBRTBCLFFBQVFSLEVBQUtnWSxlQUFnQixTQUFTSyxHQUNwQyxHQUFJSSxHQUFNSixFQUFjSyxnQkFDeEJGLEdBQUs3TyxLQUFLOE8sRUFBSUQsTUFDZEEsRUFBTzFaLEVBQUUwUixRQUFRZ0ksS0FFckIxWixFQUFFMEIsUUFBUVIsRUFBS0osS0FBS3dDLFlBQWEsU0FBU0ssR0FDdEMsR0FBSWtXLEdBQVE3WixFQUFFdVUsS0FBS21GLEVBQU0sU0FBU0ksR0FDOUJBLElBQWdCblcsRUFBV0UsYUFFMUJnVyxJQUNESixFQUFLNU8sS0FBS2xILEVBQVdFLGVBRTdCN0QsRUFBRTBCLFFBQVErWCxFQUFNLFNBQVM1VixHQUNyQjNDLEVBQUtKLEtBQUtrQyxJQUFJK1csU0FBU2xXLEtBRTNCN0QsRUFBRTBCLFFBQVFnWSxFQUFNLFNBQVM3VixHQUNyQjNDLEVBQUtKLEtBQUtrQyxJQUFJZ1gsWUFBWW5XLE9BSXRDLE9BQU9uQjtBQ3BFWDVDLE9BQU8sdUJBQ0QsU0FDQSxhQUNBLFdBQ0Esd0JBQ0EscUJBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU1EsRUFBV2tMLEdBQ2hDLFlBQ0EsSUFBSWxKLEdBQW1CaEMsRUFBV0osUUFDNUIyQyxJQUFLLEtBQ0xDLFVBQVcsS0FDWGpDLFdBQVksU0FBU0MsR0FHbkIsR0FGQUUsS0FBSzZCLElBQU0vQixFQUFLK0IsSUFDaEI3QixLQUFLOEIsVUFBWWhDLEVBQUtnQyxXQUNqQjlCLEtBQUs2QixJQUNOLEtBQU0sSUFBSTRDLE9BQU0sc0JBRXRCcVUsaUJBQW1CLFNBQVMzVyxHQUMxQixHQUFJcEMsR0FBT0MsS0FDUHdULEVBQU0xSSxTQUFTaU8sZUFBZSxVQUNsQyxJQUFLdkYsRUFBTCxDQUNBLEdBQUl3RixHQUFVclYsRUFBRXdDLFFBQVE4UyxrQkFBa0J6RixHQUFLMEYsRUFDM0NDLEVBQVN4VixFQUFFeVYsYUFBYXZhLEVBQUVnRCxJQUFJTSxFQUFZLFNBQVNLLEdBQ25ELEdBQUk2VyxHQUFTN1csRUFBV3JELE1BQU0wUCxhQUFheUssU0FBU0MsWUFBWUMsTUFBTSxFQUN0RSxPQUFPN1YsR0FBRThWLE9BQU9KLEVBQU9LLGFBRVgsS0FBWlYsRUFDQWpaLEVBQUs4QixJQUFJOFgsVUFBVVIsR0FDWkgsR0FBV2paLEVBQUs4QixJQUFJK1gsVUFBVVYsRUFFckNuWixFQUFLOEIsSUFBSThYLFVBQVVSLEdBQ2ZVLG9CQUF3Qi9PLFNBQVNDLEtBQUsrTyxZQUFjZCxFQUFRLEtBSWhFalosRUFBSzhCLElBQUk4WCxVQUFVUixHQUV2QnBaLEVBQUs4QixJQUFJa1ksbUJBSVgxWCxnQkFBa0IsU0FBU0YsR0FDekIsR0FBSXBDLEdBQU9DLEtBQ1BDLEVBQU9yQixFQUFFc0IsVUFDYkQsR0FBS3VYLEtBQUssV0FDRHpYLEVBQUsrQixVQUFVbkMsTUFDbEJJLEVBQUsrWSxpQkFBaUIzVyxLQUc1Qm5DLEtBQUt5SyxTQUFTLElBQUssV0FBV3hLLElBRWhDNEMsb0JBQXNCLFNBQVNzUyxHQUM3QixHQUdJNkQsR0FBU2dCLEVBQVlDLEVBQWFDLEVBQWFDLEVBSC9DcGEsRUFBT0MsS0FDUDZCLEVBQU05QixFQUFLOEIsSUFDWDZRLEVBQUs5VCxFQUFFdVcsRUFBTWlGLGNBQWMvUixLQUFLLEtBRXBDNFIsR0FBYzlFLEVBQU05UixZQUNBbU0sU0FBaEJ5SyxJQUNKakIsRUFBVXJWLEVBQUV3QyxRQUFROFMsa0JBQWtCbk8sU0FBU2lPLGVBQWUsWUFBWUcsRUFHMUVjLEVBQWFwYixFQUFFLElBQU04VCxHQUFJMkgsUUFBUSxrQ0FBa0NDLFFBQ25FSCxFQUFNeFcsRUFBRTRXLE1BQU1wRixFQUFNdFEsUUFBUTJWLDJCQUE2QnJGLEVBQU10USxRQUFRNFYsZ0JBQ3ZFTixFQUFNQSxFQUFNQSxFQUFJakIsRUFBSSxFQUNwQmdCLEVBQWVGLEVBQVdwUCxPQUFTLEVBQzdCb1AsRUFBV1UsU0FBU3hWLEtBQU84VSxFQUFXaFYsUUFBVW1WLEVBQ2hELEVBQ1MsR0FBWG5CLEdBQWdCa0IsRUFBY2xCLEdBQVdBLEdBQVduWCxFQUFJK1gsVUFBVVYsRUFDbEVyWCxFQUFJOFksT0FBT1QsRUFBY2xCLEVBQVEsSUFDekJuWCxFQUFJK1ksWUFBWUMsU0FBUzFGLEVBQU05UixlQUN2Q3hCLEVBQUlzQyxXQUFXZ1IsR0FDZnRULEVBQUl5QixVQUFVNlIsT0FLMUIsT0FEQXRXLEdBQUVLLE9BQU9vQyxFQUFpQkgsVUFBVXFKLEdBQzdCbEo7QUM1RVgzQyxPQUFPLHFCQUNILFlBQ0QsU0FBU0csR0FDUixZQUNBLElBQUlnUCxHQUFpQmhQLEVBQVNrUCxNQUFNOU8sUUFDaEN1UCxVQUNJRCxJQUFRLElBRVozTyxXQUFZLFNBQVNDLEdBQ2pCRSxLQUFLaU8sSUFBSSxNQUFPbk8sRUFBSzBPLE9BRzdCLE9BQU9WO0FDWlhuUCxPQUFPLHlCQUNELFNBQ0EsYUFDQSxXQUNBLGdDQUNBLGlDQUNBLGdDQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNnYyxFQUEwQkMsRUFBMkJDLEdBQzFFLFlBQ0EsSUFBSUMsR0FBcUJuYyxFQUFTMFQsS0FBS3RULFFBQ2pDd1QsR0FBSSxVQUNKN1MsV0FBWSxhQUNaOFMsT0FBUSxhQUNSdlMsT0FBUSxXQUNOLEdBR0kyRSxHQUFTbkcsRUFBRSxvQkFBb0JtRyxTQUFXbkcsRUFBRSxXQUFXc2MsYUFBWSxFQUN2RXRjLEdBQUUsU0FBU3VjLEtBQUtwVyxPQUFPQSxHQUl2QixJQUFJcVcsS0FDSnhjLEdBQUUsc0JBQXNCNEssS0FBSyxTQUFTQyxFQUFFNFIsR0FDcEMsR0FBSXBiLEdBQU9yQixFQUFFc0IsVUFDYnRCLEdBQUV5YyxHQUFLQyxLQUFLLFdBQ1IxYyxFQUFFeWMsR0FBS2hVLFlBQVksVUFDbkJwSCxFQUFLZSxZQUVUcEMsRUFBRXljLEdBQUs1UCxNQUFNLFdBRVRULE9BQU9DLFdBQVcsV0FDZGhMLEVBQUtpQixVQUNQLE9BRU5rYSxFQUFLMVIsS0FBS3pKLEtBRWRyQixFQUFFMEQsS0FBS0MsU0FBUzZZLEdBQU1uYSxPQUFPLFdBQ3pCckMsRUFBRSw2QkFBNkIrVCxTQUMvQi9ULEVBQUUsa0JBQWtCeUksWUFBWSxrQkFDaEMsR0FBSXlULElBQTRCMWEsVUFDaEMsR0FBSTJhLElBQTZCM2EsVUFDakMsR0FBSTRhLElBQTJCNWEsYUFJM0MsT0FBTzZhO0FDMUNYdGMsT0FBTyxzQkFDSCxTQUNBLGFBQ0EsV0FDQSxrQkFDQSw2QkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTK00sRUFBUzBQLEdBQzlCLFlBQ0EsSUFBSXhGLEdBQWtCalgsRUFBUzBULEtBQUt0VCxRQUNoQ2tCLE9BQVEsU0FBU29NLEdBQ2IsR0FBSXpNLEdBQU9DLElBR1gsSUFBa0MsYUFBOUJBLEtBQUtiLE1BQU1rQixPQUFPNFAsUUFDbEIsS0FBTSwwQ0FFVixJQUFJdUwsR0FBV3piLEVBQUt1TSxTQUFTdk0sRUFBS1osTUFBTXFCLElBQUksT0FBUSthLEVBQU8vTyxFQUMzRCxPQUFPZ1AsS0FJZixPQURBM2MsR0FBRUssT0FBTzZXLEVBQWdCNVUsVUFBVTBLLEdBQzVCa0s7QUN6QlhwWCxPQUFPLG9CQUNILFNBQ0EsV0FDQSxpQ0FDRCxTQUFTQyxFQUFFRSxFQUFTMlUsR0FDbkIsWUFDQSxJQUFJMUYsR0FBZ0JqUCxFQUFTMFQsS0FBS3RULFFBQzlCeVUsU0FBVTlVLEVBQUU4VSxTQUFTRixHQUNyQlgsR0FBSWxVLEVBQUUsZ0JBQ05pQixXQUFZLFdBQ1JHLEtBQUtJLFVBRVRBLE9BQVEsV0FLSixNQUpJSixNQUFLbVQsSUFBSUUsTUFBUXJULEtBQUttVCxJQUFJc0ksUUFDMUJ6YixLQUFLbVQsSUFBSUUsS0FBS3JULEtBQUsyVCxTQUFTM1QsS0FBS2IsTUFBTTRDLGFBQ3ZDL0IsS0FBS21ULElBQUlzSSxPQUFPQyxVQUFVLEVBQU1wRCxNQUFNLEtBRW5DdFksT0FHZixPQUFPK047QUNwQlhwUCxPQUFPLG1DQUNELFNBQ0EsYUFDQSxXQUNBLHdCQUNBLG9CQUNBLG1CQUNBLG9DQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNRLEVBQVd3TyxFQUFlQyxFQUFjNEcsR0FDN0QsWUFDQSxJQUFJZ0gsR0FBc0JyYyxFQUFXSixRQUMvQmdaLE1BQVMsS0FDVHRZLE9BQVMsS0FDVGlDLElBQVMsS0FDVHlJLFFBQVUsS0FDVnpLLFdBQVksU0FBU0MsR0FDbkIsR0FBSUMsR0FBT0MsSUFDWEQsR0FBS21ZLE1BQVFwWSxFQUFLb1ksTUFDbEJuWSxFQUFLOEIsSUFBTS9CLEVBQUsrQixJQUNoQjlCLEVBQUsrQixVQUFZaEMsRUFBS2dDLFNBQ3RCLElBQUk4WixHQUFjL2MsRUFBRThVLFNBQVNnQixHQUN6QmtILEVBQWVoZCxFQUFFaWQsUUFBUS9iLEVBQUttWSxNQUFPLFNBQVMxVixHQUM5QyxNQUFPQSxHQUFXckQsTUFBTTBQLGFBQWFSLFdBQVdDLFFBRWhEaEUsRUFBVXZLLEVBQUt1SyxRQUFVM0csRUFBRTJHLFFBQVE1RyxPQUFPLEtBQU0sS0FBTTNELEVBQUsrQixVQUFVd0ksUUFBUTVHLE9BQU9tQixTQUFTNFAsTUFBTTFVLEVBQUs4QixLQUd4R29FLEVBQVlxRSxFQUFReVIsY0FDeEJsZCxHQUFFMEIsUUFBUXliLE9BQU9sUCxLQUFLN0csR0FBWSxTQUFTOEcsR0FDbkNBLEVBQUlzQyxNQUFNLGNBQ1ZwSixFQUFVcVAsb0JBQW9CLFlBQWFyUCxFQUFVOEcsSUFDckRBLEVBQUlzQyxNQUFNLGFBQ1ZwSixFQUFVcVAsb0JBQW9CLFdBQVlyUCxFQUFVOEcsTUFJNURwSixFQUFFa0QsU0FBU3BCLEdBQUc3RyxFQUFFLGtDQUFrQyxHQUFJLFFBQVMwTCxFQUFRNUQsUUFBUzRELEdBQ2hGekwsRUFBRTJLLEtBQUszSyxFQUFFaU8sS0FBSytPLEdBQWUsU0FBU0ksR0FDbEMsR0FBSUMsR0FBUUQsRUFBVXBGLFFBQVEsT0FBUSxLQUNsQ3NGLEVBQWNQLEdBQ1pqTixRQUFTa04sRUFBYUksR0FBVyxHQUFHOWMsTUFBTXFCLElBQUksV0FDOUNrRixNQUFTdVcsRUFDVEMsTUFBU0EsSUFFWEUsRUFBZXZkLEVBQUVnRCxJQUFJZ2EsRUFBYUksR0FBWSxTQUFTdGMsR0FBTyxNQUFPQSxHQUFLK0MsYUFDOUUsS0FDSSxHQUFJNEwsR0FBUTNLLEVBQUUwWSxXQUFXRCxFQUN6QjlSLEdBQVFnUyxXQUFXaE8sRUFBTTZOLEdBQzNCLE1BQU96TyxHQUNMLEdBQUlLLElBQ0E1TyxNQUFPLEdBQUkyTyxJQUNQVSxJQUFLZCxFQUFFQyxrQkFLdkIvTyxFQUFFLHlDQUF5QzRLLEtBQUssU0FBU0MsRUFBRStKLEdBQ3hENVUsRUFBRTRVLEdBQUtELFVBRVZqSixFQUFRdEksbUJBQXFCakMsRUFDN0J1SyxFQUFRaVMsY0FBZ0J4YyxFQUFLd2MsZUFFL0I5RCxlQUFpQixXQUNmLE9BQ01ILEtBQU90WSxLQUFLc1ksU0FDWkMsS0FBT3ZZLEtBQUt1WSxXQUtwQmdFLGNBQWUsV0FDYixHQUVGOVMsR0FBRytTLEVBQU9qWixFQUZKK0csRUFBVXRLLEtBQ1ZzWSxLQUFXQyxLQUVqQmtFLEVBQVNuUyxFQUFRb1MsTUFBTXJRLHFCQUFxQixTQUM1Q3NRLEVBQVlGLEVBQU83UixNQUV2QixLQURBTixFQUFRc1MsZ0JBQWlCLEVBQ3BCblQsRUFBSSxFQUFPa1QsRUFBSmxULEVBQWVBLElBQzFCK1MsRUFBUUMsRUFBT2hULEdBQ2ZsRyxFQUFNK0csRUFBUXVTLFFBQVFMLEVBQU1NLFNBRTNCdlosRUFBSStLLE1BQU16SyxZQUFZdEQsUUFEbkJpYyxFQUFNTyxRQUNxQixTQUFTek8sR0FDbkNnSyxFQUFLNU8sS0FBSzRFLElBR2dCLFNBQVNBLEdBQ25DaUssRUFBSzdPLEtBQUs0RSxJQUloQmhFLEdBQVFzUyxnQkFBaUIsRUFDekJ0UyxFQUFRMFMsZ0JBQ1IxUyxFQUFRdEksbUJBQW1Cc1csS0FBT0EsRUFDbENoTyxFQUFRdEksbUJBQW1CdVcsS0FBT0EsRUFDbENqTyxFQUFRdEksbUJBQW1CbEIsUUFBUSxZQUdyQyxPQUFPNmE7QUNqR1hoZCxPQUFPLGtDQUNELFNBQ0EsYUFDQSxXQUNBLHdCQUNBLDJCQUNBLDZCQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNRLEVBQVcyZCxFQUFhQyxHQUM3QyxZQUNBLElBQUkxYixHQUF3QmxDLEVBQVdKLFFBQ2pDMkMsSUFBUyxLQUNUMUMsTUFBUyxLQUNUUSxLQUFTLEtBQ1R3WSxXQUFZLEtBQ1poVyxZQUFhLEtBQ2J0QyxXQUFZLFNBQVNDLEdBQ25CLEdBQUlDLEdBQU9DLElBQ1hELEdBQUttWSxNQUFRcFksRUFBS29ZLE1BQ2xCblksRUFBSzhCLElBQU0vQixFQUFLK0IsSUFDaEI5QixFQUFLb0MsWUFBY3JDLEVBQUtxQyxZQUN4QnBDLEVBQUtaLE1BQVEsR0FBSStkLElBQ1gvRSxXQUFjclksRUFBS3FZLFdBQ25CaFcsWUFBY3JDLEVBQUtxQyxjQUV6QnBDLEVBQUtKLEtBQU8sR0FBSXNkLElBQ1Y5ZCxNQUFRWSxFQUFLWixNQUNiMEMsSUFBUTlCLEVBQUs4QixJQUNiTSxZQUFjckMsRUFBS3FDLGNBS3pCcEMsRUFBS1ksU0FBU1osRUFBS0osS0FBTSxTQUFVSSxFQUFLb2Qsb0JBQ3hDcGQsRUFBS0osS0FBS1MsVUFFWitjLG1CQUFxQixTQUFTOVQsR0FDNUIsR0FBSXRKLEdBQU9DLEtBQ1BvZCxLQUFpQkMsS0FBaUJDLElBQ2xDalUsR0FBUUMsTUFDUjhULEVBQWF2ZSxFQUFFZ0QsSUFBSTlCLEVBQUtvQyxZQUFhLFNBQVNLLEdBQzFDLE1BQU9BLEdBQVdFLGVBR3RCMGEsRUFBYXZlLEVBQUVnRCxJQUFJd0gsRUFBUUUsU0FBVSxTQUFTaEUsR0FFMUMsTUFEQStYLEdBQVEvWCxFQUFLL0MsV0FBV3JELE1BQU1pRixLQUFPb0wsT0FDOUJqSyxFQUFLL0MsV0FBV0UsY0FFM0IyYSxFQUFheGUsRUFBRWdELElBQUloRCxFQUFFMGUsT0FBT3hkLEVBQUtvQyxZQUFhLFNBQVNLLEdBQ25ELFFBQVNBLEVBQVdyRCxNQUFNaUYsTUFBT2taLE1BQ2pDLFNBQVM5YSxHQUNULE1BQU9BLEdBQVdFLGVBRzFCM0MsRUFBS3VZLEtBQU84RSxFQUNacmQsRUFBS3dZLEtBQU84RSxFQUNadGQsRUFBS2UsUUFBUSxXQUVmMlgsZUFBaUIsV0FDZixPQUNNSCxLQUFPdFksS0FBS3NZLFNBQ1pDLEtBQU92WSxLQUFLdVksWUFJMUIsT0FBTy9XO0FDaEVYN0MsT0FBTyxrQ0FDRCxTQUNBLGFBQ0EsV0FDQSxvQ0FDQSxZQUNILFNBQVNDLEVBQUVDLEVBQUVDLEVBQVMwZSxHQUNyQixZQUNBLElBQUl6QyxHQUE2QmpjLEVBQVMwVCxLQUFLdFQsUUFDekN3VCxHQUFJLFVBQ0o3UyxXQUFZLGFBQ1o4UyxPQUFRLGFBQ1J2UyxPQUFRLFdBQ04sR0FBSUwsR0FBT0MsSUFzQlgsT0FyQkFwQixHQUFFLGlCQUFpQjZlLGVBQ2ZuUyxLQUFNLFFBQ05vUyxTQUNJQyxTQUFTLEdBRWJDLE9BQ0lDLFNBQVUsU0FBU0MsR0FDZixHQUFJcEwsR0FBS29MLEVBQU1oTCxHQUFHekssS0FBSyxNQUNuQjBWLEVBQU1uZixFQUFFLFlBQWM4VCxHQUN0QnNMLEVBQU1uZixFQUFFOFUsU0FBUzZKLEdBQ2pCakgsRUFBVXlILEdBQ1Z0WSxNQUFPcVksRUFBSTNLLEtBQUssU0FBU3NDLE9BQ3pCck4sS0FBTTBWLEVBQUkzSyxLQUFLLFNBQVNzQyxRQUU1QixPQUFPYSxPQUluQjNYLEVBQUUsK0JBQStCNkcsR0FBRyxRQUFTLFNBQVN6QyxHQUNsRHBFLEVBQUUsaUJBQWlCNmUsY0FBYyxVQUU5QjFkLElBR2YsT0FBT2diO0FDdENYcGMsT0FBTyxpQ0FDRCxTQUNBLGFBQ0EsV0FDQSxtQ0FDQSw0Q0FDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTbWYsRUFBYUMsR0FDbEMsWUFDQSxJQUFJcEQsR0FBNEJoYyxFQUFTMFQsS0FBS3RULFFBQ3hDd1QsR0FBSSxVQUNKN1MsV0FBWSxhQUNaOFMsT0FBUSxhQUNSdlMsT0FBUSxXQUNOLEdBQUlMLEdBQU9DLEtBRVBnZSxFQUFNbmYsRUFBRThVLFNBQVN1SyxFQXNCckIsT0FyQkF0ZixHQUFFLHNCQUFzQjRLLEtBQUssU0FBU0MsRUFBRStKLEdBQ3BDLEdBQUlkLEdBQUtjLEVBQUkySyxhQUFhLE1BQ3RCSixFQUFNbmYsRUFBRSxZQUFjOFQsR0FDdEJoTixFQUFRcVksRUFBSTNLLEtBQUssU0FBU3NDLE1BQzlCOVcsR0FBRTRVLEdBQUtuTCxLQUFLLE1BQU8wVixFQUFJM0ssS0FBSyxTQUFTc0MsT0FDckMsSUFBSWEsR0FBVXlILEdBQ1YzVixLQUFNMFYsRUFBSTNLLEtBQUssU0FBU3NDLFFBRTVCOVcsR0FBRTRVLEdBQUs0SyxTQUNIblksVUFBVyxPQUNYb04sTUFBTyxFQUNQa0QsUUFBU0EsRUFDVDdRLE1BQU9BLEVBQ1BpTyxTQUFVc0ssRUFDVm5kLFFBQVMsUUFDVHVkLFVBQVcsU0FFZnpmLEVBQUU0VSxHQUFLRCxNQUFNLFNBQVN2USxHQUNsQnBFLEVBQUU0VSxHQUFLNEssUUFBUSxZQUdoQnJlLElBR2YsT0FBTythO0FDeENYbmMsT0FBTyxnQ0FDRCxTQUNBLGFBQ0EsV0FDQSxtQ0FDQSwyQ0FDQSxvQ0FDQSxXQUNBLFlBQ0gsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU21mLEVBQWFDLEVBQW9CVixHQUN0RCxZQUNBLElBQUl4QyxHQUEyQmxjLEVBQVMwVCxLQUFLdFQsUUFDdkN3VCxHQUFJLFVBQ0o3UyxXQUFZLGFBQ1o4UyxPQUFRLGFBQ1J2UyxPQUFRLFdBQ04sR0FBSUwsR0FBT0MsSUF3RFgsT0FyREFwQixHQUFFLFdBQVcwZixVQUNUQyxZQUNJQyxPQUFTNWYsRUFBRSxzQkFBc0JnTSxPQUFTLEVBQzFDNlQsT0FBUSxRQUVaQyxZQUNJRixPQUFTNWYsRUFBRSxzQkFBc0JnTSxPQUFTLEVBQzFDNlQsT0FBUSxRQUVaQSxRQUNJRSxNQUNFQyxNQUFPLElBQ1BDLFdBQVcsSUFHakJDLFVBRUlDLE9BQVEsU0FBU0MsR0FDYixHQUFJQyxHQUFPcmdCLEVBQUUscUJBQXFCZ1UsU0FBUyxRQUFTb00sRUFBUyxHQUFLLElBQ2xFQyxHQUFLOUQsS0FBSytELFdBQVksV0FDdEJELEVBQUs5RCxLQUNDcFcsT0FBUSxPQUNSQyxNQUFRLE9BQ1JtYSxVQUFXdmdCLEVBQUUsdUJBQXVCbUcsU0FDcENxYSxTQUFXeGdCLEVBQUUsdUJBQXVCb0csUUFDcENXLFNBQVcsYUFHakJzWixFQUFLOUQsS0FDQ2pXLE1BQVV0RyxFQUFFLHVCQUF1Qm9HLFFBQVVpYSxFQUFLamEsU0FBUyxFQUFJcWEsU0FBU0osRUFBSzlELElBQUksZ0JBQWlCLElBQ2xHbFcsT0FBUyxJQUVmZ2EsRUFBSzlELEtBQU0rRCxXQUFZLGFBRzNCbFgsTUFBTyxTQUFTZ1gsR0FDWnBnQixFQUFFLHFCQUFxQmdVLFdBQVd1SSxLQUFLK0QsV0FBWSxZQUd2REksU0FBVSxTQUFTTixHQUNmLEdBQUlPLEdBQVNQLEVBQVMsRUFDbEJDLEVBQU9yZ0IsRUFBRSxxQkFBcUJnVSxTQUFTLE9BQVEyTSxFQUFTLElBQzVETixHQUFLOUQsS0FDQ3BXLE9BQVEsT0FDUkMsTUFBUSxPQUNSbWEsVUFBV3ZnQixFQUFFLHVCQUF1Qm1HLFNBQ3BDcWEsU0FBV3hnQixFQUFFLHVCQUF1Qm9HLFFBQ3BDVyxTQUFXLGFBRWpCc1osRUFBSzlELEtBQU0rRCxXQUFZLGdCQUk1Qm5mLElBR2YsT0FBT2liO0FDM0VYcmMsT0FBTyw2QkFDRCxTQUNBLGFBQ0EsV0FDQSx1QkFDQSxpQ0FDQSxvQkFDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTTyxFQUFtQm1nQixFQUFhamdCLEdBQ3JELFlBQ0EsSUFBSTJkLEdBQWdCcGUsRUFBU2tQLE1BQU05TyxRQUM3QmlELFlBQWEsS0FDYjZGLE1BQU8sS0FDUEMsSUFBSyxLQUNMa1EsV0FBYSxLQUNic0gsV0FBYSxLQUNiNWYsV0FBWSxTQUFTQyxHQUNuQixHQUFJQyxHQUFPQyxJQUNYRCxHQUFLb0MsWUFBY3JDLEVBQUtxQyxZQUN4QnBDLEVBQUtvWSxXQUFhclksRUFBS3FZLFdBQ3ZCcFksRUFBS0UsS0FBT3JCLEVBQUVzQixXQUNkdEIsRUFBRW1TLFFBQVFoUixFQUFLb1ksV0FBV3VILEtBQUtqUSxLQUFNLFNBQVNoSCxHQUMxQzFJLEVBQUswZixXQUFhaFgsRUFBS2lYLEtBQ3ZCM2YsRUFBSzRmLGNBQ0w1ZixFQUFLRSxLQUFLZSxRQUFRakIsS0FDbkJ3TyxLQUFLLFNBQVN5QyxFQUFPckYsRUFBWUYsR0FDaEMxTCxFQUFLRSxLQUFLaUIsWUFHaEJ5ZSxZQUFjLFdBQ1osR0FBSTVmLEdBQU9DLEtBQ1B1UCxFQUFNLEdBQUlsUSxFQUNkVSxHQUFLa08sSUFBSSxhQUFjc0IsR0FDdkIxUSxFQUFFMEIsUUFBUVIsRUFBS29DLFlBQWEsU0FBU0ssR0FDakMsR0FBSXJELEdBQVFxRCxFQUFXckQsTUFDbkJ5Z0IsRUFBYy9nQixFQUFFZ2hCLFVBQVU5ZixFQUFLMGYsV0FBV0ssVUFDeENDLEtBQVU1Z0IsRUFBTTRDLFdBQVc2TSxXQUFXbVIsS0FDdENDLFFBQVU3Z0IsRUFBTTRDLFdBQVc2TSxXQUFXb1IsU0FFNUMsSUFBS0osRUFBTCxDQUNBLEdBQUk1WCxHQUFRNFgsRUFBWUssV0FBV2pZLE1BQ3ZCN0ksRUFBTTRDLFdBQVc2TSxXQUFXc1IsVUFDcENqWSxFQUFNRCxFQUFRLENBQ2xCdUgsR0FBSU8sSUFBSSxHQUFJMFAsSUFDTnhYLE1BQU9BLEVBQ1BDLElBQUtBLEVBQ0x6RixXQUFZQSxRQUd0QnpDLEVBQUtpSSxNQUFRbkosRUFBRXNoQixJQUFJcGdCLEVBQUswZixXQUFXSyxTQUFVLFNBQVNFLEdBQ2xELE1BQU9BLEdBQVFDLFdBQVdqWSxRQUMzQmlZLFdBQVdqWSxNQUNkakksRUFBS2tJLElBQU1wSixFQUFFZ0ssSUFBSTlJLEVBQUswZixXQUFXSyxTQUFVLFNBQVNFLEdBQ2hELE1BQU9BLEdBQVFDLFdBQVdoWSxNQUMzQmdZLFdBQVdoWSxLQUVoQlMsU0FBVyxXQUNULE1BQU8xSSxNQUFLUSxJQUFJLGNBQWNDLFFBRWhDeUosV0FBYSxXQUNYLEdBQUlrVyxHQUFTdmhCLEVBQUVnRCxJQUFJN0IsS0FBS3lmLFdBQVdLLFNBQVUsU0FBU0UsR0FDbEQsTUFBT0EsR0FBUUMsV0FBV2pZLE9BRzlCLE9BREFvWSxHQUFPakosS0FBSyxTQUFTQyxFQUFFQyxHQUFLLE1BQU9ELEdBQUVDLElBQzlCK0ksR0FFVGpXLFdBQWEsU0FBU2tXLEdBQ3BCLEdBQ1E1VyxHQUFFdVcsRUFETmpnQixFQUFPQyxJQUVQLEtBQUt5SixFQUFJLEVBQUdBLEVBQUkxSixFQUFLMGYsV0FBV0ssU0FBU2xWLFNBQVVuQixFQUUvQyxHQURBdVcsRUFBVWpnQixFQUFLMGYsV0FBV0ssU0FBU3JXLEdBQy9CNFcsR0FBS0wsRUFBUUMsV0FBV2hZLElBR3hCLE1BRkFvWSxHQUFJTCxFQUFRQSxRQUVSSyxJQUFNdGdCLEVBQUswZixXQUFXSyxTQUFTbFYsT0FBUyxFQUNqQyxHQUVKeVYsQ0FHZixPQUFPLEtBVW5CLE9BREF4aEIsR0FBRUssT0FBT2dlLEVBQWMvYixVQUFVNUIsR0FDMUIyZDtBQ3pGWHZlLE9BQU8sNEJBQ0QsU0FDQSxhQUNBLFdBQ0EsVUFDQSw4QkFDQSwrQkFDSCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTNkUsRUFBRTJjLEdBQ3ZCLFlBQ0EsSUFBSXJELEdBQWVuZSxFQUFTMFQsS0FBS3RULFFBQzNCd1QsR0FBSSxXQUNKN1EsSUFBSyxLQUNMaEMsV0FBWSxTQUFTQyxHQUNuQixHQUFJQyxHQUFPQyxJQUNYRCxHQUFLOEIsSUFBTS9CLEVBQUsrQixLQUVsQjBlLGtCQUFvQixXQUNsQixHQUFJeGdCLEdBQU9DLElBQ1hELEdBQUt5Z0IsZUFBZWxYLE9BQU0sS0FFNUJrWCxjQUFnQixTQUFTalgsR0FDdkJ2SixLQUFLYyxRQUFRLFNBQVV5SSxJQUV6Qm5KLE9BQVEsV0FDTixHQUNJdUYsR0FBVThhLEVBQWVDLEVBQVdDLEVBRHBDNWdCLEVBQU9DLElBRVgwZ0IsR0FBWTloQixFQUFFLFFBQVFtRyxTQUN0QjRiLEVBQWlCN1YsU0FBU0MsS0FBSzZWLGFBQzNCQyxLQUFLQyxJQUFJSCxFQUFlLEVBQUlELEdBQWEsR0FDekMvYSxFQUFXLGNBQ1g4YSxFQUFnQjdoQixFQUFFLFFBQVFtRyxTQUFXLE1BRXJDWSxFQUFXLFVBQ1g4YSxFQUFnQixLQUVwQjFnQixFQUFLWixNQUFNa0IsT0FBT0MsS0FBSyxXQUNuQlAsRUFBS21JLFNBQVd2RSxFQUFFMkcsUUFBUXBDLFNBQVNuSSxFQUFLOEIsSUFBSTlCLEVBQUtaLE9BQ3ZDNEYsT0FBVzBiLEVBQ1g5YSxTQUFXQSxFQUNYRixJQUFNa0UsU0FBVSxTQUFTeU4sR0FBS3JYLEVBQUt5Z0IsY0FBY3BKLE9BQ3pEM0MsTUFBTTFVLEVBQUs4QixTQUl6QixPQUFPb2I7QUM1Q1h0ZSxPQUFPLGtDQUNELFNBQ0EsYUFDQSxZQUNILFNBQVNDLEVBQUVDLEVBQUVDLEdBQ1osWUFDQSxJQUFJTSxHQUFvQk4sRUFBU2tQLE1BQU05TyxRQUNqQ3NELFdBQVksS0FDWndGLE1BQU8sS0FDUEMsSUFBSyxLQUNMcEksV0FBWSxTQUFTQyxHQUNuQixHQUFJQyxHQUFPQyxJQUNYRCxHQUFLeUMsV0FBYTFDLEVBQUswQyxXQUN2QnpDLEVBQUtpSSxNQUFRbEksRUFBS2tJLE1BQ2xCakksRUFBS2tJLElBQU1uSSxFQUFLbUksS0FFbEJhLFNBQVUsV0FDUixNQUFPOUksTUFBS2lJLElBQUlqSSxLQUFLZ0ksT0FFdkIrWSxVQUFXLFNBQVMxSixNQUkxQixPQUFPalk7QUN4QlhtVCxRQUFRcFMsUUFDTjZnQixPQUNJQyxTQUFZLGtFQUNaQyxVQUFZLDRFQUNaeGMsR0FBWSxtREFDWnljLE9BQVkscUNBQ1pDLFFBQVkseUNBQ1pDLFNBQVkscUZBQ1ovQyxTQUFZLGtFQUNaNUksS0FBWSxnRUFDWjRMLFdBQVksc0VBQ1pDLFNBQVksY0FDWmhWLElBQVksZ0JBQ1o4RSxNQUFZLFlBRWhCbVEsTUFDRU4sV0FDRU8sTUFBTyxXQUVUUixVQUNJUSxNQUFTLFNBQVUsY0FDbkJDLFFBQVcsWUFFZkosWUFDSUksUUFBVyxLQUVmaE0sTUFDSStMLFNBRUpuRCxVQUNJbUQsTUFBTyxXQUVYSixVQUNFSSxNQUFPLGNBSWJsUCxTQUNJLFNBQ0Esb0JBQ0EsbUJBQ0EsZ0JBQ0EsWUFDQSxhQUNELFNBQVMzVCxFQUFFa1AsRUFBZUMsRUFBY3hKLEVBQU9zTyxHQUM5QyxZQUNBLElBQUk4TyxHQUFhL2lCLEVBQUUsU0FBU3lKLEtBQUssY0FDN0JzWixHQUNBL2lCLEVBQUVtUyxRQUFRNFEsRUFBWSxTQUFTeEosR0FDM0IsSUFDSSxHQUFJdEYsR0FDSixHQUFJdE8sSUFDRXFkLE9BQVF6SixFQUFXOUcsTUFBTXVRLE9BQ3pCemhCLE9BQVFnWSxJQUVoQixNQUFPekssR0FDQXlLLEVBQVcwSixPQUNaLEdBQUk5VCxJQUNBNU8sTUFBTyxHQUFJMk8sSUFDUFUsSUFBS2QsRUFBRUMsa0JBS3hCWSxLQUFLLFNBQVN5QyxFQUFPckYsRUFBWUYsR0FDaEMsR0FBSXNDLElBQ0E1TyxNQUFPLEdBQUkyTyxJQUNQVSxJQUFLLG9DQUFzQ21ULEVBQWEsS0FBT2xXLFFBSzNFLEdBQUlzQyxJQUNBNU8sTUFBTyxHQUFJMk8sSUFDUFUsSUFBSyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL2FydGljbGVzJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy9hcnRpY2xlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZXNDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgICAgICBtb2RlbDogQXJ0aWNsZU1vZGVsXG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBBcnRpY2xlc0NvbGxlY3Rpb247XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdjb2xsZWN0aW9ucy90aW1lbGluZScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lL2l0ZW0nXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVGltZWxpbmVJdGVtTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IFRpbWVsaW5lSXRlbU1vZGVsXG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBUaW1lbGluZUNvbGxlY3Rpb247XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ3ZpZXdzL2lzc3VlJ1xuICAgICwgJ21vZGVscy9pc3N1ZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLEFzeW5jSW5pdCxJc3N1ZVZpZXcsSXNzdWVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1vZGVsOiBudWxsXG4gICAgICAgICwgdmlldyA6IG51bGxcbiAgICAgICAgLCByb3V0ZXI6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBJc3N1ZU1vZGVsKHsgY29uZmlnOiBhcmdzLmNvbmZpZyB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IG5ldyBJc3N1ZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogYXJncy5jb25maWdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgdGhhdC5tb2RlbC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2godGhhdC5tb2RlbC5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhhcnRpY2xlLCAnYWN0aXZlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdhcnRpY2xlLycgKyBhcnRpY2xlLmdldCgnYXJ0aWNsZWlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnJvdXRlci5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyQXJ0aWNsZShhcnRpY2xlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChJc3N1ZUNvbnRyb2xsZXIucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIElzc3VlQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICdtb2RlbHMvbWFwJ1xuICAgICwgJ3ZpZXdzL21hcCdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9wYW4nXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL2xheWVyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsTWFwTW9kZWwsTWFwVmlldyxBc3luY0luaXQsTWFwUGFuQ29udHJvbGxlcixNYXBMYXllckNvbnRyb2xsZXIsTWFwVGltZWxpbmVDb250cm9sbGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1vZGVsOiBudWxsXG4gICAgICAgICwgdmlldzogIG51bGxcbiAgICAgICAgLCBpc3N1ZTogbnVsbFxuICAgICAgICAsIGNvbmZpZzogbnVsbFxuICAgICAgICAsIG1hcFBhbkNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgTWFwTGF5ZXJDb250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIG1hcFRpbWVsaW5lQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBNYXBNb2RlbChhcmdzKTtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IG5ldyBNYXBWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiAgdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0LnJvdXRlclxuICAgICAgICAgICAgICAgICwgaXNzdWU6IHRoYXQuaXNzdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3LmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlciA9IG5ldyBNYXBQYW5Db250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcExheWVyQ29udHJvbGxlciA9IG5ldyBNYXBMYXllckNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIHZpZXcgIDogdGhhdC52aWV3XG4gICAgICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgICAgICwgbW9kZWwgOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgY29udHJvbHNjb25maWc6IHRoYXQuY29uZmlnLmNvbnRyb2xzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdtYXJrZXJzJywgZnVuY3Rpb24obWFya2VyVmlld3Mpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9yZWdpc3Rlck1hcmtlcnMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIuZml0TWFya2VyQm91bmRzKHRoYXQudmlldy5tYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxbdGhhdC5tb2RlbC5pbml0KCksIHRoYXQudmlldy5pbml0KCldKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfcmVnaXN0ZXJNYXJrZXJzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIF8uZm9yRWFjaChtYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cE9wZW4obWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICd0b2dnbGUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBUb2dnbGUobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcsICdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihldnQpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3Lm1vZGVsLnRyaWdnZXIoJ2FjdGl2ZScsIG1hcmtlclZpZXcubW9kZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywnbW91c2VvdmVyJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC52aWV3Lm1hcC5ob3ZlclBvcHVwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9nZXRNYXJrZXJMYXllciA6IGZ1bmN0aW9uKG9iaixtZXRob2QpIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciwgbGF5ZXJzO1xuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEwuTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGlmIChtZXRob2QgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVycyA9IG9iai5nZXRMYXllcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9iaiA9IGxheWVycy5wb3AoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMob2JqLCAnb3JpZ2luYWxFdmVudCcpKSB7XG4gICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmoudGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hcE1hcmtlckxheWVyO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBPcGVuOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ29wZW5Qb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIub3BlblBvcHVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cFRvZ2dsZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICd0b2dnbGVQb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIudG9nZ2xlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwQ2xvc2U6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnY2xvc2VQb3B1cCcpO1xuICAgICAgICAgICAgaWYgKCFtYXBNYXJrZXJMYXllcikgcmV0dXJuO1xuICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIuY2xvc2VQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwQ29udHJvbGxlci5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvcHJvdG90eXBlJywgW1xuICAgICAgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbihfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBDb250cm9sbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgnY29udHJvbGxlcicpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIENvbnRyb2xsZXIuZXh0ZW5kID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZDtcbiAgICBfLmV4dGVuZChDb250cm9sbGVyLnByb3RvdHlwZSwgQmFja2JvbmUuRXZlbnRzKTtcbiAgICBfLmV4dGVuZChDb250cm9sbGVyLnByb3RvdHlwZSwgeyBcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuaW1wbGVtZW50ZWQgaW5pdGlhbGl6ZSgpJyk7XG4gICAgICAgIH0gXG4gICAgfSk7XG4gICAgcmV0dXJuIENvbnRyb2xsZXI7XG59KTsiLCJkZWZpbmUoJ2NvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZScsIFtcbiAgICAgICdsZWFmbGV0J1xuICAgICwgJ2QzJ1xuXSwgZnVuY3Rpb24gKEwsZDMpIHtcbiAgICBpZiAoTC5Db250cm9sLlRpbWVsaW5lKSByZXR1cm4gTDtcbiAgICBMLkNvbnRyb2wuVGltZWxpbmUgPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb24gOiAnbGVmdCdcbiAgICAgICAgICAgICAgLCBoZWlnaHQgICAgICA6IDUwMFxuICAgICAgICAgICAgICAsIHdpZHRoICAgICAgIDogMTAwXG4gICAgICAgICAgICAgICwgbWFyZ2luICAgICAgOiB7IGxlZnQ6IDMsIHJpZ2h0OiAzLCB0b3A6IDEwLCBib3R0b206IDUgfVxuICAgICAgICAgICAgICAsIGNvbGxhcHNlZCAgIDogdHJ1ZVxuICAgICAgICAgICAgICAsIGl0ZW0gICAgICAgIDoge21pbkhlaWdodDoxfVxuICAgICAgICAgICAgICAsIG9uICAgICAgICAgIDogbnVsbFxuICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogJ1RpbWVsaW5lJ1xuICAgICAgICAgICAgICAsIHBvc2l0aW9uICAgIDogJ3RvcGxlZnQnXG4gICAgICAgIH1cbiAgICAgICAgLCBpbml0aWFsaXplIDogZnVuY3Rpb24obWFwLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICAgICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2NvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZSBsZWFmbGV0LWNvbnRyb2wnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlID0gdGhpcy5fdG9nZ2xlID0gTC5Eb21VdGlsLmNyZWF0ZSgnYScsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtdG9nZ2xlJywgY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUudGl0bGUgPSB0aGlzLm9wdGlvbnMudGl0bGU7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLmxpbmsgPSAnIyc7XG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGZ1bmN0aW9uKCkgeyB0aGF0Ll9leHBhbmQoKTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoTC5Ccm93c2VyLnRvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0b2dnbGUsICdjbGljaycsIGV4cGFuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24odGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0aGlzLl9jb250YWluZXIsICdjbGljaycsIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBvblJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBkbyBhbnkgY2xlYW51cCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgLCBvbkFkZDogZnVuY3Rpb24obWFwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgX2V4cGFuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhhdC5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRoYXQuX2V4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWV4cGFuZGVkJyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90aW1lbGluZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgaW5uZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgICAtIHRoaXMub3B0aW9ucy5tYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIGlubmVyV2lkdGggID0gdGhpcy5vcHRpb25zLndpZHRoICAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB4U2NhbGUgPSB0aGlzLl94U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbMCxpbm5lcldpZHRoXSk7XG5cbiAgICAgICAgICAgIHZhciB5U2NhbGUgPSB0aGlzLl95U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5kb21haW4oW3RoaXMuX3NvdXJjZS5zdGFydCx0aGlzLl9zb3VyY2UuZW5kXSlcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJIZWlnaHRdKTtcblxuICAgICAgICAgICAgdmFyIHRpbWVsaW5lID0gdGhpcy5fdGltZWxpbmUgPSBkMy5zZWxlY3QoJy5sZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3RpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLm9wdGlvbnMud2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgYmFuZCA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYmFuZCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgKGlubmVyV2lkdGgvMiAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBpbm5lckhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAndHJhbnNsYXRlKCcgKyAuMjUqaW5uZXJXaWR0aCArICcsJyArIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICsgICcpJ1xuICAgICAgICAgICAgICAgICAgICArICcgc2NhbGUoLjc1IDEuMCknXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gYmFuZC5zZWxlY3RBbGwoJ2cnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NvdXJjZS5nZXRJdGVtcygpKVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywndGltZWxpbmUtaXRlbScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLm1heChbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pdGVtLm1pbkhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB5U2NhbGUoZC5kdXJhdGlvbigpKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCAnICsgeVNjYWxlKGQuc3RhcnQpICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLl9icnVzaCA9IGQzLnN2Zy5icnVzaCgpXG4gICAgICAgICAgICAgICAgLnkoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vbignYnJ1c2hlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dFN0YXJ0ID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dEVuZCAgID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBzZWxlY3RlZCA6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRTdGFydCAhPT0gZXh0RW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNiYW5kJykuc2VsZWN0QWxsKCdyZWN0LnRpbWVsaW5lLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeVNjYWxlKGkuc3RhcnQpIDw9IGV4dEVuZCkgJiYgKHlTY2FsZShpLmVuZCkgICA+PSBleHRTdGFydCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc2VsZWN0ZWQucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5jbGVhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLm9uLmJydXNoZW5kKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB5QnJ1c2ggPSBiYW5kLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdicnVzaCcpXG4gICAgICAgICAgICAgICAgLmNhbGwoYnJ1c2gpO1xuICAgICAgICAgICAgeUJydXNoLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJyxpbm5lcldpZHRoKTtcblxuICAgICAgICAgICAgdmFyIHlBeGlzID0gdGltZWxpbmUuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdheGlzJylcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywndHJhbnNsYXRlKCcgKyAoKC4yNSppbm5lcldpZHRoKSAtIHRoaXMub3B0aW9ucy5tYXJnaW4ubGVmdCkgKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKScpO1xuXG4gICAgICAgICAgICB2YXIgYXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAuc2NhbGUoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vcmllbnQodGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKVxuICAgICAgICAgICAgICAgIC50aWNrU2l6ZSg2LCAwKVxuICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHRoaXMuX3NvdXJjZS50aWNrVmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zb3VyY2UudGlja0Zvcm1hdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlBeGlzLmNhbGwoYXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfY29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICAodGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlIHx8IHR5cGVvZiB0aGlzLm9wdGlvbnMub24uY29sbGFwc2UgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSgpO1xuICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZWxpbmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBMLmNvbnRyb2wudGltZWxpbmUgPSBmdW5jdGlvbihtYXAsc291cmNlLG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuVGltZWxpbmUobWFwLHNvdXJjZSxvcHRpb25zKTtcbiAgICB9O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2FzeW5jSW5pdCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXN5bmNJbml0ID0ge1xuICAgICAgICAgICRkZWY6IG51bGxcbiAgICAgICAgLCBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRkZWYucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNJbml0O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2RvbXdhdGNoZXInLCBbXG4gICAgJ2pxdWVyeScgXG5dLCBmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBET01XYXRjaGVyID0ge1xuICAgICAgICB3YXRjaERPTSA6IGZ1bmN0aW9uKG1zLHNlbCwkZGVmKSB7XG4gICAgICAgICAgICBpZiAoIXNlbCkgdGhyb3cgXCJFbXB0eSBzZWxlY3RvciBpbiB3YXRjaERPTSgpXCI7XG4gICAgICAgICAgICBpZiAoJChzZWwpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub24oJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSwgbXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERPTVdhdGNoZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZmV0Y2h4bWwnLCBbXG4gICAgJ2pxdWVyeSdcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEZldGNoWE1MID0ge1xuICAgICAgICAvLyByZXR1cm4gYW4gb2JqZWN0IGltcGxlbWVudGluZyB0aGUgUHJvbWlzZSBpbnRlcmZhY2VcbiAgICAgICAgLy8gd2hlbiBzdWNjZXNzZnVsLCB0aGUgUHJvbWlzZSByZXR1cm5zIHRoZSBkYXRhIGZldGNoZWRcbiAgICAgICAgLy8gYnkgdGhlIGFqYXggcmVxdWVzdFxuICAgICAgICAvLyBkYXRhIHJldHVybmVkIGJ5IHRoZSBwcm9taXNlIGlzIGEgRG9jdW1lbnRcbiAgICAgICAgZmV0Y2hYTUwgOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3htbCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgJGdldC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlamVjdCh0ZXh0U3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAkZ2V0LnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZldGNoWE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL3htbDJodG1sJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBYTUwySFRNTCA9IHtcbiAgICAgICAgX2RvYzogZnVuY3Rpb24oeG1sKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB4bWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4bWwsJ3RleHQveG1sJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHhtbCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0geG1sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgZG9jdW1lbnQgaW5wdXQgaW4gWE1MMkhUTUxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeG1sRG9jID09IG51bGwgfHwgKCF4bWxEb2MuaGFzT3duUHJvcGVydHkoJ2dldEVsZW1lbnRzQnlUYWdOYW1lJykgJiYgeG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXJzZXJlcnJvcicpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGRvY3VtZW50IGluIHhtbDJodG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhtbERvYztcbiAgICAgICAgfSxcbiAgICAgICAgLy8gcmV0dXJuIEhUTUwgb3IgSlNPTiBzdHJpbmcgZnJvbSBYU0xUIHRyYW5zZm9ybWF0aW9uXG4gICAgICAgIHhtbDJodG1sOiBmdW5jdGlvbih4bWwseHNsLHBhcmFtcyxtb2RlKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jID0gdGhpcy5fZG9jKHhtbCksXG4gICAgICAgICAgICAgICAgeHNsRG9jID0gdGhpcy5fZG9jKHhzbCk7XG4gICAgICAgICAgICB2YXIgeHNsdFByb2Nlc3NvciA9IG5ldyBYU0xUUHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB4c2x0UHJvY2Vzc29yLmltcG9ydFN0eWxlc2hlZXQoeHNsRG9jKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIF8uZWFjaChfLmtleXMocGFyYW1zKSwgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5zZXRQYXJhbWV0ZXIobnVsbCxrZXkscGFyYW1zW2tleV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHhzbHRQcm9jZXNzb3IudHJhbnNmb3JtVG9Eb2N1bWVudCh4bWxEb2MpO1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLzx0cmFuc2Zvcm1paXg6cmVzdWx0Pi4uLjwvdHJhbnNmb3JtaWl4OnJlc3VsdD5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID0gZG9jLmJvZHkuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaW4gWFNMVCB0cmFuc2Zvcm06ICcgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFhNTDJIVE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2ZldGNoeG1sJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2dlb2pzb24ueHNsJ1xuICAgICwgJ3RleHQheHNsL2NpdGVkLXJhbmdlLnhzbCdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEZldGNoWE1MLEFzeW5jSW5pdCxYTUwySFRNTCxnZW9Kc29uWHNsLGNpdGVkUmFuZ2VYc2wsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciAkZ2V0ID0gdGhhdC5mZXRjaFhNTCh0aGF0LmdldCgncGF0aCcpKTtcbiAgICAgICAgICAgICAgICAkLndoZW4oJGdldCkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0KCd4bWwnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX21rQ2l0ZWRSYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5nZW9qc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNldCgncGxhY2VUeXBlJywgdGhhdC5nZW9qc29uLnByb3BlcnRpZXMubGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHRleHRTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkVycm9yIGVuY291bnRlcmVkIGhhbmRsaW5nIHhtbCBmaWxlIGF0ICdcIiArIHRoYXQuZ2V0KCdwYXRoJykgKyBcIic6IFwiICsgdGV4dFN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgLy9UT0RPOiBhZGQgYWRhcHRlciBmb3IgYWNjZXNzIHRocm91Z2ggbW9kZWwgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gc28gdGhhdCBtb2RlbCBpc24ndCB0aWVkIHRvIGVuY29kaW5nXG4gICAgICAgICAgICAgIFwieG1sXCIgICAgICAgOiBudWxsICAgIC8vIERvY3VtZW50XG4gICAgICAgICAgICAsIFwicGxhY2VUeXBlXCIgOiBudWxsXG4gICAgICAgICAgICAsIFwiaWNvblVybFwiICAgOiAnJ1xuICAgICAgICAgICAgLCBcImNpdGVkUmFuZ2VcIjoge31cbiAgICAgICAgfSxcbiAgICAgICAgZ2VvanNvbjogbnVsbCxcbiAgICAgICAgZ2V0R2VvanNvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZW9qc29uID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHRoaXMuX21rR2VvanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VvanNvbjtcbiAgICAgICAgfSxcbiAgICAgICAgX21rR2VvanNvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBqc29uU3RyaW5nID0gdGhpcy54bWwyaHRtbCh0aGlzLmdldCgneG1sJyksIGdlb0pzb25Yc2wsIHt9LCAndGV4dCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VvanNvbiA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogXCJGYWlsZWQgdG8gcGFyc2UgZ2VvanNvbiBnZW5lcmF0ZWQgZnJvbSAnXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5nZXQoJ3BhdGgnKSArIFwiJzogXCIgKyBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbWtDaXRlZFJhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgY2l0ZWRSYW5nZVhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ2NpdGVkUmFuZ2UnLCBKU09OLnBhcnNlKGpzb25TdHJpbmcpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY2l0ZWQgcmFuZ2UganNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxGZXRjaFhNTCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2FydGljbGUnXG4gICAgLCAnY29sbGVjdGlvbnMvYXJ0aWNsZXMnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwsQXJ0aWNsZUNvbGxlY3Rpb24sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgYXJ0ZGlyICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlO1xuICAgICAgICAgICAgaWYgKCFhcnRkaXIubWF0Y2goL1xcLyQvKSkgYXJ0ZGlyICs9ICcvJztcbiAgICAgICAgICAgIHZhciBmaWxlcyAgID0gYXJncy5jb25maWcuYXJ0aWNsZXMuZmlsZXM7XG4gICAgICAgICAgICB2YXIgY29sICAgICA9IG5ldyBBcnRpY2xlQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIC8vIGZpeCBsZW5ndGggb2YgYXJ0aWNsZXMgYXJyYXlcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IF8ubWFwKF8ucmFuZ2UoZmlsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgLy8gYXJ0aWNsZXMgY29uc3RydWN0ZWQgc3luYywgc28gYXJ0aWNsZSBvYmplY3RzIGFkZGVkIHRvIGxpc3QgYnkgaW5kZXhcbiAgICAgICAgICAgIF8uZWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSxpKSB7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZXNbaV0gPSBuZXcgQXJ0aWNsZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgaSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWRpcjogYXJ0ZGlyLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAgICAgICBhcnRkaXIgKyBmaWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbml0cyA9IF8ubWFwKGFydGljbGVzLCBmdW5jdGlvbihhcnRpY2xlKXtyZXR1cm4gYXJ0aWNsZS5pbml0KCk7fSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKGFydGljbGVzKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldEljb25zKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGluaXRzLCBmdW5jdGlvbigkcHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkcHJvbWlzZS5zdGF0ZSgpID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTsgLy8gbm90IHJlLXNldCBvbiBmYWlsdXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXAgbWFya2VyIGljb25zIGZpbGVuYW1lIHZhbHVlcyBhcmUgc2V0IGhlcmU7IGljb24gY29sb3JzIGFyZSBhc3NpZ25lZFxuICAgICAgICAvLyByYW5kb21seSwgc28gdG8gc3VwcG9ydCBhIGNvbnNpc3RlbmN5IGJldHdlZW4gdGhlIGNvbG9yIGFuZCB0aGUgcGxhY2UtdHlwZVxuICAgICAgICAvLyBsYXllciwgdGhleSBtdXN0IGJlIGFzc2lnbmVkIGFzIGEgZ3JvdXBcbiAgICAgICAgLCBzZXRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaWNjb25maWcgID0gdGhhdC5jb25maWcubWFya2Vycy5pY29ucztcbiAgICAgICAgICAgIHZhciBpY29uRmlsZXMgPSBfLnNodWZmbGUoXy5mbGF0dGVuKFxuICAgICAgICAgICAgICAgIF8ubWFwKGljY29uZmlnLCBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoZW50cnkuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5kaXIuY29uY2F0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEljb25GaWxlID0gaWNvbkZpbGVzLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGljb25zID0gW107XG4gICAgICAgICAgICAvLyBkbyBtYXAgbWFya2VyIGljb24gaW5pdGlhbGl6YXRpb247IHRoaXMgc2VlbXMgbGlrZSBpdCBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIGlzb2xhdGVkIHRvIHRoZSBNYXBWaWV3IG9yIE1hcmtlclZpZXcsIGJ1dCBpcyBkYXRhIHVzZWRcbiAgICAgICAgICAgIC8vIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb24sIHNvIHRoZXkgYXJlIGFzc2lnbmVkIGhlcmVcbiAgICAgICAgICAgIHRoYXQuZ2V0KCdjb2xsZWN0aW9uJykuZm9yRWFjaChmdW5jdGlvbihhcnRpY2xlLGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvanNvbiA9IChhcnRpY2xlLmdldEdlb2pzb24oKSB8fCB7XCJwcm9wZXJ0aWVzXCI6e319KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBnZW9qc29uLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWNvbnNbbGF5ZXJdID0gaWNvbnNbbGF5ZXJdIHx8IGljb25GaWxlcy5wb3AoKSB8fCBkZWZhdWx0SWNvbkZpbGU7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZS5zZXQoJ2ljb25VcmwnLCBpY29uc1tsYXllcl0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIGFydGljbGUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gYXJndW1lbnQ7XG4gICAgICAgIC8vIGFyZ3VtZW50IG1heSBiZSBlaXRoZXIgYW4gaW5kZXggaW50byB0aGUgY29sbGVjdGlvblxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBwcm92aWRlZCBieSBhIHVybCkgb3IgYW4gQXJ0aWNsZU1vZGVsXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHNlbGVjdGVkIGJ5IGEgbWFwIG1hcmtlcikgXG4gICAgICAgICwgZ2V0QXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgdmFyIGFydDtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFydCA9IGFydGljbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJ0aWNsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBjb2wuYXQoYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJ0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTihhcmdzLmNvbmZpZy5tYXAuY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ21hcGNvbmZpZycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvYWQgbWFwIGNvbmZpZyBmaWxlOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtYXBjb25maWdcIiA6IHt9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgncm91dGVzL3JvdXRlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2NsZWFyJ1xuICAgICwgJ2NvbnRyb2xsZXJzL2lzc3VlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcCdcbiAgICAsICd2aWV3cy9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsQ2xlYXJWaWV3LElzc3VlQ29udHJvbGxlcixNYXBDb250cm9sbGVyLE1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kKHtcbiAgICAgICAgICBwYWdlcyAgIDoge30gICAvLyBjb25maWcgZm9yIHN1cHBvcnRlZCBwYWdlc1xuICAgICAgICAsIGNvbmZpZyAgOiB7fSAgIC8vIGdsb2JhbCBzaXRlIGNvbmZpZ3VyYXRpb24sIGkuZS4sIHNpdGUuanNvblxuICAgICAgICAsIGlzc3VlQ29udHJvbGxlciA6IG51bGwgLy8gSXNzdWVNb2RlbCBmb3IgdGhpcyBhcHBcbiAgICAgICAgLCBtYXBDb250cm9sbGVyICAgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBvcHRzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMucGFnZXMgID0gb3B0cy5jb25maWcucGFnZXM7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlciA9IG5ldyBJc3N1ZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgcm91dGVyOiB0aGlzXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoaXMuY29uZmlnIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlci5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBwYWdlcy5yb3V0ZXIuaGlzdG9yeSA9IHRydWUgYnkgZGVmYXVsdCwgaWYgbWlzc2luZ1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyh0aGF0LnBhZ2VzLnJvdXRlciwnaGlzdG9yeScpICYmICEhdGhhdC5wYWdlcy5yb3V0ZXIuaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgICwgcGFnZTogZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBhZ2VDb25maWc7XG4gICAgICAgICAgICB2YXIgbWFwUGFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhZ2UpIHBhZ2UgPSB0aGlzLnBhZ2VzLmhvbWU7XG4gICAgICAgICAgICAgICAgcGFnZUNvbmZpZyA9IHRoaXMucGFnZXMucGFnZXNbcGFnZV07XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VDb25maWcgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZyBpbiByb3V0ZXIvcGFnZScpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhZ2UoJzQwNCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IENsZWFyVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgXy5lYWNoKHBhZ2VDb25maWcsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXdOYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVDb250cm9sbGVyLm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBjb25maWcgdG8gYXZvaWQgZ2xvYmFsIGNoYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYykpO1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyhjb25maWcsICd2aWV3JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSBjb25maWcudmlldztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmZpZywgJ3BhcnRpYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9ICd2aWV3cy9wYXJ0aWFsJztcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBhcnRpYWwucGFnZSA9IHRoYXQucGFnZXMucGF0aEJhc2UgKyBjb25maWcucGFydGlhbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gXy5leHRlbmQoYXJncyxjb25maWcucGFydGlhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25mZywgJ2Z1bGwnKSkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbmZpZy5mdWxsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHBhZ2UgdHlwZSBpbiByb3V0ZXI6ICcgKyBwYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdOYW1lID09PSAndmlld3MvbWFwJykge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIgPSBuZXcgTWFwQ29udHJvbGxlcihhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwUGFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbdmlld05hbWVdLCBmdW5jdGlvbihWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW1hcFBhZ2UpIHRoYXQubWFwQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLCBhcnRpY2xlIDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCQoJyN0aXRsZXBhZ2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3RpdGxlcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyNwYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhhdC5tYXBDb250cm9sbGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBNZW51VmlldyhhcmdzKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGVjdCB0aGUgYXJ0aWNsZSBpbmRpY2F0ZWQgYnkgdGhlIHVybCdzIHJvdXRlIG9ubHkgYWZ0ZXJcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgaGFzIGluaXRpYWxpemVkXG4gICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFydGljbGUgPSB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbC5nZXRBcnRpY2xlKGlkKTsgXG4gICAgICAgICAgICAgICAgYXJ0aWNsZS50cmlnZ2VyKCdhY3RpdmUnLCBhcnRpY2xlKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUm91dGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgndmlld3MvYXBwJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNpZ25hbCA9IHt9O1xuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcHBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeSdcbiAgICAsICdtaXhpbnMveG1sMmh0bWwnXG4gICAgLCAndGV4dCF4c2wvYXJ0aWNsZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsR2FsbGVyeVZpZXcsWE1MMkhUTUwseHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgaWQ6ICdhcnRpY2xlJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRlbCA9ICQoJyMnICsgdGhhdC5pZCk7XG4gICAgICAgICAgICBpZiAodGhhdC4kZWwuZmluZCgnIycgKyB0aGF0Lm1vZGVsLmNpZCkubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBodG1sID0gdGhpcy54bWwyaHRtbChcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLmdldCgneG1sJyksIHhzbCwgXG4gICAgICAgICAgICAgICAge1wiYXJ0aWNsZS1kaXJcIjogdGhhdC5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2VcbiAgICAgICAgICAgICAgICAsIFwiaWNvblVybFwiICAgIDogdGhhdC5tb2RlbC5nZXQoJ2ljb25VcmwnKVxuICAgICAgICAgICAgICAgICwgXCJjaWRcIiAgICAgICAgOiB0aGF0Lm1vZGVsLmNpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICQoJy5hcnRpY2xlLWNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjJyt0aGlzLmlkKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcnRpY2xlIGxvYWQgZXJyb3I6IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBHYWxsZXJ5VmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjZm9vdGVyJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgICAkKCdhcnRpY2xlJykucmVtb3ZlQ2xhc3MoJ2JlZm9yZS1mb290ZXInKS5hZGRDbGFzcygnbm8tZm9vdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LiRlbC5maW5kKCcuYXJ0aWNsZS1tYXJrZXInKS5jbGljayhmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHRoYXQubW9kZWwudHJpZ2dlcigndG9nZ2xlJywgdGhhdC5tb2RlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99LFxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9jbGVhcicsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENsZWFyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIENsZWFyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pc3N1ZS5odG1sJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCxBcnRpY2xlVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogICAgICAgICAnI2lzc3VlJyxcbiAgICAgICAgdGVtcGxhdGU6ICAgXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQodG1wbCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlckFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIG5ldyBBcnRpY2xlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIGFydGljbGVcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogdGhpcy5tb2RlbC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhpc1xuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGlzLm1vZGVsLnJvdXRlclxuICAgICAgICAgICAgfSkucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gSXNzdWVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcC5odG1sJ1xuICAgICwgJ3ZpZXdzL21hcmtlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ21vZGVscy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2Vycm9yL3VzZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCxtYXBQYXJ0aWFsLE1hcmtlclZpZXcsQXN5bmNJbml0LFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICAgICAgJ21hcCdcbiAgICAgICAgLCB0YWdOYW1lOiAnZGl2J1xuICAgICAgICAsIG1hcmtlclZpZXdzOiBbXSAvLyBzdWJ2aWV3c1xuICAgICAgICAsIG1hcGNvbmZpZzoge31cbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5tb2RlbDtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LFt0aGF0Lmlzc3VlLmluaXQoKSwgdGhhdC5tb2RlbC5pbml0KCldKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gdGhhdC5tb2RlbC5nZXQoJ21hcGNvbmZpZycpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5jaGlsZHJlbigpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9pbml0TWFwKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lm1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyVmlld0luaXRzID0gXy5tYXAodGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24oaSkgeyBpLiRkZWYgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sIG1hcmtlclZpZXdJbml0cykuZG9uZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcInVuZGVmaW5lZCBtYXJrZXIgdmlld3MuXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRNYXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQobWFwUGFydGlhbCk7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAgPSBuZXcgTC5NYXAodGhhdC5tYXBjb25maWcuaWQsIHRoYXQubWFwY29uZmlnLm1hcCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQubWFwY29uZmlnLnZpZXcpIHtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwLnNldFZpZXcoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcodGhhdC5tYXBjb25maWcudmlldy5sYXQsIHRoYXQubWFwY29uZmlnLnZpZXcubG5nKVxuICAgICAgICAgICAgICAgICAgICAgICwgdGhhdC5tYXBjb25maWcudmlldy56b29tXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHttb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogJ0xlYWZsZXQgcmVwb3J0cyBiYWQgZGF0YSBpbiBtYXAuanNvbiBmaWxlLiAnICsgZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH0pfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBMLlRpbGVMYXllcih0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIudXJsLCB0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIub3B0cykuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgICAgIG5ldyBMLmNvbnRyb2wuc2NhbGUodGhhdC5tYXBjb25maWcuc2NhbGUpLmFkZFRvKHRoYXQubWFwKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IF8ubWFwKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWFya2VyVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsICAgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnIDogdGhhdC5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG12KSB7IG12LnJlbmRlcigpIH0pO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtYXJrZXJzJywgdGhhdC5tYXJrZXJWaWV3cyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXJrZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLWxlZ2VuZC5odG1sJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyx0bXBsLGxlZ2VuZFBhcnRpYWwsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpXG4gICAgICAgICwgZWw6ICcnXG4gICAgICAgICwgbWFya2VyTGF5ZXI6IG51bGxcbiAgICAgICAgLCBtYXA6IG51bGxcbiAgICAgICAgLCBtYXBjb25maWc6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhhdC5pbml0TWFya2VyTGF5ZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5tYXJrZXJMYXllcikge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIkZhaWxlZCB0byBpbml0aWFsaXplIG1hcmtlciBsYXllci5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICwgaW5pdE1hcmtlckxheWVyIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZ2VvanNvbiA9IHRoaXMubW9kZWwuZ2V0R2VvanNvbigpO1xuICAgICAgICAgICAgdmFyIGljb25Db25maWcgPSB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5pY29uO1xuICAgICAgICAgICAgaWNvbkNvbmZpZy5pY29uVXJsID0gKHRoaXMubW9kZWwuZ2V0KCdpY29uVXJsJykgfHwgJycpO1xuICAgICAgICAgICAgdmFyIGljb24gPSBMLmljb24oaWNvbkNvbmZpZyk7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlckxheWVyID0gTC5nZW9Kc29uKGdlb2pzb24sIHtcbiAgICAgICAgICAgICAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbWFwTWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgcG9wdXAgdG8gdGhpcyBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gTC5wb3B1cCh0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5wb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLnNldENvbnRlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICB0aGF0Lm1vZGVsLmdldCgnYXJ0aWNsZWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvanNvbjogICAgdGhhdC5tb2RlbC5nZXRHZW9qc29uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5iaW5kUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIGZvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFya2VyLCB3aGljaCB3b3VsZCBjbG9zZSB0aGUgcG9wdXAgaWYgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2VyZSBhbHJlYWR5IG9wZW5cbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignY2xpY2snLCBldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbW91c2VvdmVyJywgZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwubWFya2VyKGxhdGxuZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uICAgICAgICA6IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2thYmxlICAgOiAhIWZlYXR1cmUucHJvcGVydGllcy50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogKGZlYXR1cmUucHJvcGVydGllcy5tYXJrZXJuYW1lIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBvcGFjaXR5ICAgICA6IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLm9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICwgcmlzZU9uSG92ZXIgOiB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5yaXNlT25Ib3ZlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlckxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFya2VyTGF5ZXIuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnRpY2xlID0gdGhhdC5tb2RlbC5nZXQoJ3BhdGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJtYXAgbWFya2VyIGxheWVyIGlzIHVuZGVmaW5lZCBmb3IgYXJ0aWNsZSAnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYXJ0aWNsZSArIFwiJy4gQ2hlY2sgbGF0L2xuZyB2YWx1ZXMgaW4gZmlsZS5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkVycm9yIGFkZGluZyBtYXJrZXIgbGF5ZXI6IFwiICsgZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcmtlclZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcmtlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21lbnUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tZW51Lmh0bWwnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLG1lbnVUbXBsLERPTVdhdGNoZXIsQXJ0aWNsZU1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUobWVudVRtcGwpLFxuICAgICAgICAgIGlkOiAgICAgICdtZW51J1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgaXNzdWU6ICAgbnVsbFxuICAgICAgICAsIGNvbmZpZzogIHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gYXJncy5pc3N1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoYXQuaWQpLmNoaWxkcmVuKCkubGVuZ3RoICE9PSAwKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmNvbmZpZy5tZW51O1xuICAgICAgICAgICAgLy8gcmVuZGVyIGVhY2ggaXRlbSBmcm9tIHRoZSBjb25maWcgZmlsZSB0byBhIDxsaT5cbiAgICAgICAgICAgIC8vIG11c3QgYmUgZG9uZSBhc3luYyBkdWUgdG8gcmV0cmlldmFsIG9mIHBhcnRpYWwgZmlsZXNcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgIC8vIGNhY2hlIG9mIHRlbXBsYXRlIHN0cmluZ3M6IHVybCA9PiB0ZW1wbFxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25zID0ge307XG4gICAgICAgICAgICBfLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1tpdGVtLnBhcnRpYWxdID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5jb2xsZWN0aW9uID09PSBcImNvbGxlY3Rpb25zL2FydGljbGVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0gPSB0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5oYW5kbGVkIGNvbGxlY3Rpb24gdHlwZSByZXF1ZXN0ZWQ6IFwiICsgaXRlbS5jb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyh0ZW1wbGF0ZXMpLCBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgdXJsXSwgZnVuY3Rpb24odGVtcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzW3VybF0gPSBfLnRlbXBsYXRlKHRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkZGVmLnByb21pc2UoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgbWVudSBhcyBhIDxkaXY+XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICcnO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KCQsIHByb21pc2VzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBpdGVtLnBhcnRpYWw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdwYWdlJyB8fCBpdGVtLnR5cGUgPT09ICdzZXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0ubW9kZWxzLmZvckVhY2goZnVuY3Rpb24obW9kZWwsaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmICAgID0gaXRlbS5pdGVtLmhyZWYucmVwbGFjZSgnOmknLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW12ICAgICA9IG5ldyBBcnRpY2xlTWVudVZpZXcoe21vZGVsOm1vZGVsfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCAgPSBhbXYucmVuZGVyKHtocmVmOiAnIycgKyBocmVmfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRsaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIGFuIDxsaT4gZWxlbWVudCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0JPRFknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZG9jdW1lbnQgZWxlbWVudCBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcmVzdWx0IHR5cGUgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbGkuYXR0cignZGF0YS1zb3J0LWtleScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuYXR0cignZGF0YS1zb3J0LWtleScpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuZmluZCgnYScpLnRleHQoKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzID0gXy5rZXlzKHNvcnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cy5zb3J0KGZ1bmN0aW9uKGEsYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChzb3J0S2V5cywgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJDb250ZW50ICs9IHNvcnRlcltrZXldWzBdLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogc3ViQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyB0aGF0LmlkKS5lbXB0eSgpLmFwcGVuZCh0aGF0LnRlbXBsYXRlKHtjb250ZW50OiBjb250ZW50fSkpO1xuICAgICAgICAgICAgICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgbWVudSBoYXMgbG9hZGVkXG4gICAgICAgICAgICAgICAgdmFyICRmYWlsRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICRmYWlsRGVmLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LndhdGNoRE9NKDUwMCwgJyMnICsgdGhhdC5pZCwgJGZhaWxEZWYpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYnVpbGQgbWVudS5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1lbnVWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhZ2UnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL2RvbXdhdGNoZXInLFxuICAgICd0ZXh0IXBhcnRpYWxzL3BhZ2UuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLHBhZ2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhZ2VWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJGRlZi50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkZGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhZ2VWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gUGFnZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhcnRpYWwnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFydGlhbFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnJyxcbiAgICAgICAgcGFnZTogJycsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmVsICAgPSBvcHRzLmVsO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIG9wdHMucGFnZV0sIGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnBhZ2UgPSBodG1sO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICR3YXRjaERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuaW5pdCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQodGhhdC5wYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJHdhdGNoRGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gUGFydGlhbFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL2xheWVyL3BsYWNldHlwZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXIvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixQbGFjZVR5cGVDb250cm9sbGVyLFRpbWVsaW5lQ29udHJvbGxlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwTGF5ZXJDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIHZpZXcgICA6IG51bGxcbiAgICAgICAgLCByb3V0ZXIgOiBudWxsXG4gICAgICAgICwgbWFwICAgIDogbnVsbFxuICAgICAgICAsIGNvbnRyb2xzY29uZmlnIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBhcmdzLnZpZXc7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5tb2RlbDtcbiAgICAgICAgICAgIHRoYXQuY29udHJvbHNjb25maWcgPSBhcmdzLmNvbnRyb2xzY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5zdWJDb250cm9sbGVycyA9IFtdO1xuICAgICAgICAgICAgaWYgKF8uaGFzKHRoYXQuY29udHJvbHNjb25maWcsICdwbGFjZXR5cGUnKSAmJiB0aGF0LmNvbnRyb2xzY29uZmlnLnBsYWNldHlwZS5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzLnB1c2gobmV3IFBsYWNlVHlwZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIHZpZXdzIDogdGhhdC52aWV3Lm1hcmtlclZpZXdzXG4gICAgICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF8uaGFzKHRoYXQuY29udHJvbHNjb25maWcsICd0aW1lbGluZScpICYmIHRoYXQuY29udHJvbHNjb25maWcudGltZWxpbmUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zdWJDb250cm9sbGVycy5wdXNoKG5ldyBUaW1lbGluZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXdzIDogdGhhdC52aWV3Lm1hcmtlclZpZXdzXG4gICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgICAgICwgc2l0ZWNvbmZpZyAgOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMuY29uZmlnXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQuc3ViQ29udHJvbGxlcnMsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHN1YkNvbnRyb2xsZXIsICdmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fdXBkYXRlTWFya2VycygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaWx0ZXIgdGhlIHZpc2libGUgbWFwIG1hcmtlcnMgYmFzZWQgb24gdGhlIHBsYWNldHlwZSBhbmQgdGhlXG4gICAgICAgIC8vIHRpbWVsaW5lIGxheWVyIGNvbnRyb2xzOyB0aGUgXCJoaWRlXCIgc3RhdGUgdGFrZXMgcHJlY2VkZW5jZSBpZlxuICAgICAgICAvLyB0aGUgY29udHJvbHMgZGlzYWdyZWUgKGkuZS4sIGEgbWFya2VyIHRoYXQgaXMgaGlkZGVuIG9uIGFueVxuICAgICAgICAvLyBjb250cm9sIGlzIGhpZGRlbiBvbiB0aGUgbWFwKVxuICAgICAgICAsIF91cGRhdGVNYXJrZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzaG93ID0gW10sIGhpZGUgPSBbXTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnN1YkNvbnRyb2xsZXJzLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gc3ViQ29udHJvbGxlci5nZXRGaWx0ZXJTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGhpZGUucHVzaChyZXMuaGlkZSlcbiAgICAgICAgICAgICAgICBoaWRlID0gXy5mbGF0dGVuKGhpZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC52aWV3Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gXy5maW5kKGhpZGUsIGZ1bmN0aW9uKGhpZGRlbkxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkxheWVyID09PSBtYXJrZXJWaWV3Lm1hcmtlckxheWVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgc2hvdy5wdXNoKG1hcmtlclZpZXcubWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2goc2hvdywgZnVuY3Rpb24obWFya2VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcubWFwLmFkZExheWVyKG1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKGhpZGUsIGZ1bmN0aW9uKG1hcmtlckxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3Lm1hcC5yZW1vdmVMYXllcihtYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBMYXllckNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9wYW4nLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsRE9NV2F0Y2hlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwUGFuQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtYXA6IG51bGxcbiAgICAgICAgLCBtYXBjb25maWc6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhpcy5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZztcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5pbml0aWFsaXplZCBtYXBcIik7XG4gICAgICAgIH1cbiAgICAgICAgLCBfZml0TWFya2VyQm91bmRzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBlbHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZScpO1xuICAgICAgICAgICAgaWYgKCFlbHQpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBlZGdlUHRYID0gTC5Eb21VdGlsLmdldFZpZXdwb3J0T2Zmc2V0KGVsdCkueDtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBMLmxhdExuZ0JvdW5kcyhfLm1hcChtYXJrZXJWaWV3cyxmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxuZ0xhdCA9IG1hcmtlclZpZXcubW9kZWwuZ2V0R2VvanNvbigpLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBMLmxhdExuZyhsbmdMYXQucmV2ZXJzZSgpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVkZ2VQdFggIT0gdGhhdC5tYXAuZ2V0U2l6ZSgpLngpIHtcbiAgICAgICAgICAgICAgICAvLyBtYXAgdW5kZXJuZWF0aCBhcnRpY2xlXG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcywge1xuICAgICAgICAgICAgICAgICAgICAncGFkZGluZ0JvdHRvbVJpZ2h0JyA6IFtkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gZWRnZVB0WCwwXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBtYXAgYmVzaWRlIGFydGljbGVcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQubWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRqdXN0IG1hcCBwYW4vem9vbSB0byBtYWtlIGFsbCBtYXAgbWFya2VycyBvY2N1ciB0byB0aGVcbiAgICAgICAgLy8gbGVmdCBvZiBkaXYjYXJ0aWNsZSBpbiB3aWRlIG1vZGVcbiAgICAgICAgLCBmaXRNYXJrZXJCb3VuZHMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkZGVmLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGF0Lm1hcGNvbmZpZy52aWV3KSB7XG4gICAgICAgICAgICAgICAgICB0aGF0Ll9maXRNYXJrZXJCb3VuZHMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLCcjYXJ0aWNsZScsJGRlZik7XG4gICAgICAgIH1cbiAgICAgICAgLCBoYW5kbGVQb3B1cFBvc2l0aW9uIDogZnVuY3Rpb24ocG9wdXApIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtYXAgPSB0aGF0Lm1hcDtcbiAgICAgICAgICAgIHZhciBpZCA9ICQocG9wdXAuZ2V0Q29udGVudCgpKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgdmFyIGVkZ2VQdFgsICRwb3B1cFdyYXAsIHBvcHVwTGF0TG5nLCBwb3B1cFJpZ2h0WCwgcGFkO1xuICAgICAgICAgICAgcG9wdXBMYXRMbmcgPSBwb3B1cC5nZXRMYXRMbmcoKTtcbiAgICAgICAgICAgIGlmIChwb3B1cExhdExuZyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgICAgICBlZGdlUHRYID0gTC5Eb21VdGlsLmdldFZpZXdwb3J0T2Zmc2V0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlJykpLng7XG4gICAgICAgICAgICAvLyBtYXAgc2hvdWxkIHBhbiByaWdodC9lYXN0IGlmIHRoZSBwb3B1cCBiYWxsb29uIGlzIGNvdmVyZWQgYnkgdGhlIGFydGljbGU7XG4gICAgICAgICAgICAvLyBwYWQgaXMgYSBzbGlnaHQgcmVsaWVmIGJldHdlZW4gdGhlIHBvcHVwIGFuZCB0aGUgYXJ0aWNsZVxuICAgICAgICAgICAgJHBvcHVwV3JhcCA9ICQoJyMnICsgaWQpLmNsb3Nlc3QoJy5sZWFmbGV0LXBvcHVwLWNvbnRlbnQtd3JhcHBlcicpLmZpcnN0KCk7XG4gICAgICAgICAgICBwYWQgPSBMLnBvaW50KHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmdCb3R0b21SaWdodCB8fCBwb3B1cC5vcHRpb25zLmF1dG9QYW5QYWRkaW5nKTtcbiAgICAgICAgICAgIHBhZCA9IHBhZCA/IHBhZC54IDogMDtcbiAgICAgICAgICAgIHBvcHVwUmlnaHRYID0gKCRwb3B1cFdyYXAubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICA/ICRwb3B1cFdyYXAub2Zmc2V0KCkubGVmdCArICRwb3B1cFdyYXAud2lkdGgoKSArIHBhZFxuICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYICE9IDAgJiYgcG9wdXBSaWdodFggPiBlZGdlUHRYICYmIGVkZ2VQdFggIT0gbWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgbWFwLnBhbkJ5KFtwb3B1cFJpZ2h0WCAtIGVkZ2VQdFgsMF0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbWFwLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvcHVwLmdldExhdExuZygpKSkge1xuICAgICAgICAgICAgICAgIG1hcC5jbG9zZVBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBtYXAub3BlblBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFBhbkNvbnRyb2xsZXIucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNYXBQYW5Db250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibXNnXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdtc2cnLCBhcmdzLm1zZyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvcG9wb3ZlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvbGlnaHRib3gnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcydcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3LEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3LEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRqdXN0IGhlaWdodCBvZiBhcnRpY2xlIGJvZHlcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBpbiBjc3NcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjYXJ0aWNsZSBhcnRpY2xlJykuaGVpZ2h0KCkgLSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAkKCcjYm9keScpLmNzcyh7aGVpZ2h0OmhlaWdodH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2VzIHRoYXQgZmFpbCB0byBsb2FkLCBzaW5jZSB3ZSBjYW5ub3QgZG9cbiAgICAgICAgICAgIC8vIGEgZmlsZSB0ZXN0IHdoZW4gcnVubmluZyB0aGUgeHNsXG4gICAgICAgICAgICB2YXIgZGVmcyA9IFtdO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGltZyl7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZUNsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHNvbWUgdGltZSBiZWZvcmUgZmFpbHVyZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMucHVzaCgkZGVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZnMpLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZS5yZW1vdmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaW1hZ2UtbG9hZGluZycpLnJlbW92ZUNsYXNzKCdpbWFnZS1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG4vKlxuICogVGhpcyBpcyBtZWFudCB0byBiZSBleHRlbmRlZCBhcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aGVcbiAqIHNlY3Rpb25zIG9mIGFuIGFydGljbGUuXG4gKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9tZW51JywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUtbWVudS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsWE1MMkhUTUwsYW1Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIHRoaXMgdmlldyBpcyBtZWFudCB0byBiZSBjYWxsZWQgb25seSBhZnRlciB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gYXJ0aWNsZSBtb2RlbCBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwuaW5pdCgpLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlVuaW5pdGlhbGl6ZWQgYXJ0aWNsZSBpbiBBcnRpY2xlTWVudVZpZXdcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZW51aXRlbSA9IHRoYXQueG1sMmh0bWwodGhhdC5tb2RlbC5nZXQoJ3htbCcpLCBhbVhzbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiBtZW51aXRlbTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNZW51Vmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ3RleHQhcGFydGlhbHMvZXJyb3IvdXNlci5odG1sJ1xuXSwgZnVuY3Rpb24oJCxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgZWw6ICQoJyNlcnJvckRpYWxvZycpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRlbC5odG1sICYmIHRoaXMuJGVsLm1vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwuYXR0cmlidXRlcykpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLm1vZGFsKHtrZXlib2FyZDogdHJ1ZSwgc2hvdzogdHJ1ZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyL3BsYWNldHlwZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci1sZWdlbmQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsbGVnZW5kUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGxhY2V0eXBlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICB2aWV3cyAgOiBudWxsXG4gICAgICAgICwgcm91dGVyIDogbnVsbFxuICAgICAgICAsIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBjb250cm9sIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gYXJncy5tYXBjb25maWc7XG4gICAgICAgICAgICB2YXIgbGVnZW5kVGVtcGwgPSBfLnRlbXBsYXRlKGxlZ2VuZFBhcnRpYWwpO1xuICAgICAgICAgICAgdmFyIGxheWVyTWFya2VycyA9IF8uZ3JvdXBCeSh0aGF0LnZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tb2RlbC5nZXRHZW9qc29uKCkucHJvcGVydGllcy5sYXllcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGF0LmNvbnRyb2wgPSBMLmNvbnRyb2wubGF5ZXJzKG51bGwsIG51bGwsIHRoYXQubWFwY29uZmlnLmNvbnRyb2wubGF5ZXJzLm9wdGlvbnMpLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgIC8vIGRpc2FibGUgbW91c2VvdmVyL21vdXNlb3V0IGV2ZW50cyBmb3IgdGhpcyBjb250cm9sLCB3aGljaCBhcmUgc2V0IGJ5IGRlZmF1bHQgaW5cbiAgICAgICAgICAgIC8vIExlYWZsZXQ7IGVuYWJsZXMgJ2NsaWNrJyBjb250cm9sXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udHJvbC5nZXRDb250YWluZXIoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChPYmplY3Qua2V5cyhjb250YWluZXIpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3ZlcicpKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3V0JykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGNvbnRhaW5lcltrZXldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gaW4gU2FmYXJpLCBsYXllciBjb250cm9sIGJ1dHRvbiBkb2VzIG5vdCByZWNlaXZlICdmb2N1cycgZXZlbnQgb24gY2xpY2tcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgTC5Eb21FdmVudC5vbigkKCcubGVhZmxldC1jb250cm9sLWxheWVycy10b2dnbGUnKVswXSwgJ2NsaWNrJywgY29udHJvbC5fZXhwYW5kLCBjb250cm9sKTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXMobGF5ZXJNYXJrZXJzKSwgZnVuY3Rpb24obGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtsYXNzID0gbGF5ZXJOYW1lLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJMZWdlbmQgPSBsZWdlbmRUZW1wbCh7XG4gICAgICAgICAgICAgICAgICAgICAgaWNvblVybDogbGF5ZXJNYXJrZXJzW2xheWVyTmFtZV1bMF0ubW9kZWwuZ2V0KCdpY29uVXJsJylcbiAgICAgICAgICAgICAgICAgICAgLCB0aXRsZSAgOiBsYXllck5hbWVcbiAgICAgICAgICAgICAgICAgICAgLCBrbGFzcyAgOiBrbGFzc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJMYXllcnMgPSBfLm1hcChsYXllck1hcmtlcnNbbGF5ZXJOYW1lXSwgZnVuY3Rpb24odmlldyl7IHJldHVybiB2aWV3Lm1hcmtlckxheWVyOyB9KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBMLmxheWVyR3JvdXAobWFya2VyTGF5ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbC5hZGRPdmVybGF5KGxheWVyLGxheWVyTGVnZW5kKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnaW5wdXQubGVhZmxldC1jb250cm9sLWxheWVycy1zZWxlY3RvcicpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICQoZWx0KS5jbGljaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250cm9sLm1hcExheWVyQ29udHJvbGxlciA9IHRoYXQ7XG4gICAgICAgICAgICBjb250cm9sLl9vbklucHV0Q2xpY2sgPSB0aGF0Ll9vbklucHV0Q2xpY2s7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBkbyBub3Qgb3ZlcnJpZGUgdGhpcyBwcml2YXRlIG1ldGhvZDsgc2FmZXIgdG8gcmVwbGFjZVxuICAgICAgICAvLyAgTC5jb250cm9sLmxheWVycygpIHdpdGggYSBjdXN0b20gY29udHJvbFxuICAgICAgICAsIF9vbklucHV0Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgIFx0XHR2YXIgaSwgaW5wdXQsIG9iaixcbiAgICBcdFx0ICAgIGlucHV0cyA9IGNvbnRyb2wuX2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JyksXG4gICAgXHRcdCAgICBpbnB1dHNMZW4gPSBpbnB1dHMubGVuZ3RoO1xuICAgIFx0XHRjb250cm9sLl9oYW5kbGluZ0NsaWNrID0gdHJ1ZTtcbiAgICBcdFx0Zm9yIChpID0gMDsgaSA8IGlucHV0c0xlbjsgaSsrKSB7XG4gICAgXHRcdFx0aW5wdXQgPSBpbnB1dHNbaV07XG4gICAgXHRcdFx0b2JqID0gY29udHJvbC5fbGF5ZXJzW2lucHV0LmxheWVySWRdO1xuICAgIFx0XHRcdGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgXHRcdFx0XHRvYmoubGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgIFx0XHRcdFx0ICAgIHNob3cucHVzaChsYXllcik7XG4gICAgXHRcdFx0ICAgIH0pO1xuICAgIFx0XHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0XHRvYmoubGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xuICAgIFx0XHRcdFx0ICAgIGhpZGUucHVzaChsYXllcik7XG4gICAgXHRcdFx0ICAgIH0pO1xuICAgIFx0XHRcdH1cbiAgICBcdFx0fVxuICAgIFx0XHRjb250cm9sLl9oYW5kbGluZ0NsaWNrID0gZmFsc2U7XG4gICAgXHRcdGNvbnRyb2wuX3JlZm9jdXNPbk1hcCgpO1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci5zaG93ID0gc2hvdztcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIuaGlkZSA9IGhpZGU7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLnRyaWdnZXIoJ2ZpbHRlcicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFBsYWNldHlwZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndmlld3MvbWFwL2xheWVyL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixUaW1lbGluZVZpZXcsVGltZWxpbmVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwVGltZWxpbmVDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBtb2RlbCAgOiBudWxsXG4gICAgICAgICwgdmlldyAgIDogbnVsbFxuICAgICAgICAsIHNpdGVjb25maWc6IG51bGxcbiAgICAgICAgLCBtYXJrZXJWaWV3czogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBhcmdzLm1hcmtlclZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBUaW1lbGluZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgIHNpdGVjb25maWcgIDogYXJncy5zaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3cyA6IGFyZ3MubWFya2VyVmlld3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IFRpbWVsaW5lVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZXN1bHRzLmNsZWFyIGlzIGEgZmxhZyB0aGF0IHRoZSBicnVzaCBpcyBlbXB0eVxuICAgICAgICAgICAgLy8gcmVzdWx0cy5pbmNsIGlzIGFuIGFycmF5IG9mIE1hcFRpbWVsaW5lSXRlbSdzXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNob3cvaGlkZSBvbiBsaXN0cyBvZiBBcnRpY2xlTW9kZWwnc1xuICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdmaWx0ZXInLCB0aGF0Ll9oYW5kbGVGaWx0ZXJFdmVudCk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaGFuZGxlRmlsdGVyRXZlbnQgOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvd0xheWVycyA9IFtdLCBoaWRlTGF5ZXJzID0gW10sIHNob3dJZHMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmNsZWFyKSB7XG4gICAgICAgICAgICAgICAgc2hvd0xheWVycyA9IF8ubWFwKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob3dMYXllcnMgPSBfLm1hcChyZXN1bHRzLnNlbGVjdGVkLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dJZHNbaXRlbS5tYXJrZXJWaWV3Lm1vZGVsLmNpZF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaGlkZUxheWVycyA9IF8ubWFwKF8uZmlsdGVyKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobWFya2VyVmlldy5tb2RlbC5jaWQgaW4gc2hvd0lkcyk7XG4gICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LnNob3cgPSBzaG93TGF5ZXJzO1xuICAgICAgICAgICAgdGhhdC5oaWRlID0gaGlkZUxheWVycztcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignZmlsdGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBUaW1lbGluZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQoJy5nYWxsZXJ5LWl0ZW0nKS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGdhbGxlcnk6e1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZVNyYzogZnVuY3Rpb24oJGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9ICRpdGVtLmVsLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHBvID0gJCgnLnBvcG92ZXIuJyArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKGxpZ2h0Ym94VGl0bGVUZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiAkcG8uZmluZCgnLmF0dHInKS50ZXh0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5nbHlwaGljb24uZ2x5cGhpY29uLWV4cGFuZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoJ29wZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXBsKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9saWdodGJveC10aXRsZS5odG1sJ1xuICAgICwgJ3NsaWRlc2pzJ1xuICAgICwgJ2xpZ2h0Ym94J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHBvcG92ZXJUZW1wbCxwb3BvdmVyQ29udGVudFRlbXBsLGxpZ2h0Ym94VGl0bGVUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gY29uZmlndXJlIHNsaWRlc2pzOyB1cCB0byBub3csICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICAvLyBoYXMgYXBwbGllZFxuICAgICAgICAgICAgJChcIiNzbGlkZXNcIikuc2xpZGVzanMoe1xuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdDoge1xuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICBjcm9zc2ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG9uIGxvYWQgb2YgZmlyc3QgcGljXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIChudW1iZXIgLSAxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBsZWZ0IG9mZnNldCBvbmNlIHRoZSBwcmV2aW91cyBwcm9wZXJ0aWVzIGhhdmUgYmVlbiBzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgICA6ICgkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpIC0gJGltZy53aWR0aCgpKS8yIC0gcGFyc2VJbnQoJGltZy5jc3MoJ3BhZGRpbmctbGVmdCcpLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1hcmdpbiA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIHN0YXJ0IG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGVuZCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IG51bWJlciAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIG5ld0ltZyArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb2xsZWN0aW9ucy90aW1lbGluZSdcbiAgICAsICdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lL2l0ZW0nXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxUaW1lbGluZUNvbGxlY3Rpb24sVGltZWxpbmVJdGVtLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgICAgbWFya2VyVmlld3M6IG51bGxcbiAgICAgICAgLCBzdGFydDogbnVsbFxuICAgICAgICAsIGVuZDogbnVsbFxuICAgICAgICAsIHNpdGVjb25maWcgOiBudWxsXG4gICAgICAgICwgYm9va2NvbmZpZyA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gYXJncy5tYXJrZXJWaWV3cztcbiAgICAgICAgICAgIHRoYXQuc2l0ZWNvbmZpZyA9IGFyZ3Muc2l0ZWNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTih0aGF0LnNpdGVjb25maWcuYm9vay5maWxlLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5ib29rY29uZmlnID0gZGF0YS5ib29rO1xuICAgICAgICAgICAgICAgIHRoYXQuX2luaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbCA9IG5ldyBUaW1lbGluZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gbWFya2VyVmlldy5tb2RlbDtcbiAgICAgICAgICAgICAgICB2YXIgYm9va0NoYXB0ZXIgPSBfLmZpbmRXaGVyZSh0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXJ0ICAgIDogbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLnBhcnRcbiAgICAgICAgICAgICAgICAgICAgLCBjaGFwdGVyIDogbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLmNoYXB0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWJvb2tDaGFwdGVyKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYm9va0NoYXB0ZXIucGFyYWdyYXBocy5zdGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgICArIG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5wYXJhZ3JhcGg7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgMTtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKG5ldyBUaW1lbGluZUl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFxuICAgICAgICAgICAgICAgICAgICAsIGVuZDogZW5kXG4gICAgICAgICAgICAgICAgICAgICwgbWFya2VyVmlldzogbWFya2VyVmlld1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC5zdGFydCA9IF8ubWluKHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB9KS5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgdGhhdC5lbmQgPSBfLm1heCh0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuZW5kO1xuICAgICAgICAgICAgfSkucGFyYWdyYXBocy5lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRJdGVtcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzO1xuICAgICAgICB9XG4gICAgICAgICwgdGlja1ZhbHVlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IF8ubWFwKHRoaXMuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFsdWVzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBhLWI7IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgICAgICAsIHRpY2tGb3JtYXQgOiBmdW5jdGlvbihwKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGksY2hhcHRlcjtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXB0ZXIgPSB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwIDw9IGNoYXB0ZXIucGFyYWdyYXBocy5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjaGFwdGVyLmNoYXB0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBibGFuayB0aWNrIGZvciBlbmQgb2YgYm9va1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPT09IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG5cbiAgICAgICAgICAgIF8uZmluZEluZGV4KHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0uY2lkID09PSB0aW1lbGluZUl0ZW0uY2lkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpKSByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5nZXQoaSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChUaW1lbGluZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBUaW1lbGluZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL3RpbWVsaW5lLmh0bWwnXG4gICAgLCAnY29udHJvbHMvTC5Db250cm9sLlRpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsdGltZWxpbmVDb250cm9sUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAndGltZWxpbmUnXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgfVxuICAgICAgICAsIF90aW1lbGluZUNvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9oYW5kbGVGaWx0ZXIoe2NsZWFyOnRydWV9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXIgOiBmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdmaWx0ZXInLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uLCBjb250cm9saGVpZ2h0LCBtYXBoZWlnaHQsIGRvY3VtZW50aGVpZ2h0O1xuICAgICAgICAgICAgbWFwaGVpZ2h0ID0gJCgnI21hcCcpLmhlaWdodCgpO1xuICAgICAgICAgICAgZG9jdW1lbnRoZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkb2N1bWVudGhlaWdodC8yIC0gbWFwaGVpZ2h0KSA8IDIpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICdib3R0b21yaWdodCc7XG4gICAgICAgICAgICAgICAgY29udHJvbGhlaWdodCA9ICQoJyNtYXAnKS5oZWlnaHQoKSAtIDEwMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAndG9wbGVmdCc7XG4gICAgICAgICAgICAgICAgY29udHJvbGhlaWdodCA9IDUwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC50aW1lbGluZSA9IEwuY29udHJvbC50aW1lbGluZSh0aGF0Lm1hcCx0aGF0Lm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICB7ICAgICBoZWlnaHQgICA6IGNvbnRyb2xoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb24gOiBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLCBvbjogeyBicnVzaGVuZDogZnVuY3Rpb24oYSkgeyB0aGF0Ll9oYW5kbGVGaWx0ZXIoYSk7IH19fVxuICAgICAgICAgICAgICAgICkuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVWaWV3O1xufSk7XG5cbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lL2l0ZW0nLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lSXRlbU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgICBtYXJrZXJWaWV3OiBudWxsXG4gICAgICAgICwgc3RhcnQ6IG51bGwgICAgICAgLy8gXCJhYnNvbHV0ZVwiIHN0YXJ0IChpZSwgcGFyYWdyYXBoIGluZGV4IHcvbyBjaGFwdGVyKVxuICAgICAgICAsIGVuZDogbnVsbCAgICAgICAgIC8vIFwiYWJzb2x1dGVcIiBlbmRcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXcgPSBhcmdzLm1hcmtlclZpZXc7XG4gICAgICAgICAgICB0aGF0LnN0YXJ0ID0gYXJncy5zdGFydDtcbiAgICAgICAgICAgIHRoYXQuZW5kID0gYXJncy5lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBkdXJhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmQtdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICAsIGNvbXBhcmVUbzogZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFRpbWVsaW5lSXRlbU1vZGVsO1xufSk7XG4iLCJyZXF1aXJlLmNvbmZpZyh7XG4gIHBhdGhzOiB7XG4gICAgICBiYWNrYm9uZSAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYmFja2JvbmUuanMvMS4xLjIvYmFja2JvbmUtbWluJ1xuICAgICwgYm9vdHN0cmFwIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3R3aXR0ZXItYm9vdHN0cmFwLzMuMy41L2pzL2Jvb3RzdHJhcC5taW4nXG4gICAgLCBkMyAgICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZDMvMy41LjYvZDMubWluJ1xuICAgICwganF1ZXJ5ICAgIDogJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5taW4nXG4gICAgLCBsZWFmbGV0ICAgOiAnLy91bnBrZy5jb20vbGVhZmxldEAwLjcuMy9kaXN0L2xlYWZsZXQnXG4gICAgLCBsaWdodGJveCAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbWFnbmlmaWMtcG9wdXAuanMvMS4wLjAvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLm1pbidcbiAgICAsIHNsaWRlc2pzICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zbGlkZXNqcy8zLjAvanF1ZXJ5LnNsaWRlcy5taW4nXG4gICAgLCB0ZXh0ICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcmVxdWlyZS10ZXh0LzIuMC4xMi90ZXh0Lm1pbidcbiAgICAsIHVuZGVyc2NvcmU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUtbWluJ1xuICAgICwgcGFydGlhbHMgIDogJy4uL3BhcnRpYWxzJ1xuICAgICwgeHNsICAgICAgIDogJy4uL3NjcmlwdC94c2wnXG4gICAgLCBwYWdlcyAgICAgOiAnLi4vcGFnZXMnXG4gIH0sXG4gIHNoaW06IHtcbiAgICBib290c3RyYXA6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGJhY2tib25lOiB7XG4gICAgICAgICdkZXBzJzogWydqcXVlcnknLCAndW5kZXJzY29yZSddLFxuICAgICAgICAnZXhwb3J0cyc6ICdCYWNrYm9uZSdcbiAgICB9LFxuICAgIHVuZGVyc2NvcmU6IHtcbiAgICAgICAgJ2V4cG9ydHMnOiAnXydcbiAgICB9LFxuICAgIHRleHQ6IHtcbiAgICAgICAgJ2RlcHMnOiBbXVxuICAgIH0sXG4gICAgc2xpZGVzanM6IHtcbiAgICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH0sXG4gICAgbGlnaHRib3g6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9XG4gIH1cbn0pO1xucmVxdWlyZShbXG4gICAgJ2pxdWVyeScsXG4gICAgJ21vZGVscy9lcnJvci91c2VyJyxcbiAgICAndmlld3MvZXJyb3IvdXNlcicsXG4gICAgJ3JvdXRlcy9yb3V0ZXInLFxuICAgICd2aWV3cy9hcHAnLFxuICAgICdib290c3RyYXAnXG5dLCBmdW5jdGlvbigkLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsUm91dGVyLEFwcFZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIGNvbmZpZ2ZpbGUgPSAkKCcjbWFpbicpLmF0dHIoJ2RhdGEtY29uZmlnJyk7XG4gICAgaWYgKGNvbmZpZ2ZpbGUpIHtcbiAgICAgICAgJC5nZXRKU09OKGNvbmZpZ2ZpbGUsIGZ1bmN0aW9uKHNpdGVjb25maWcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IEFwcFZpZXcoKTtcbiAgICAgICAgICAgICAgICBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICByb3V0ZXM6IHNpdGVjb25maWcucGFnZXMucm91dGVzXG4gICAgICAgICAgICAgICAgICAgICwgY29uZmlnOiBzaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaXRlY29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIG1zZzogXCJGYWlsZWQgdG8gbG9hZCBzaXRlIGNvbmZpZyBmaWxlICdcIiArIGNvbmZpZ2ZpbGUgKyBcIicgXCIgKyBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgbXNnOiBcIk5vIGNvbmZpZ3VyYXRpb24gZmlsZW5hbWUgc3BlY2lmaWVkIGluIGhvbWUgcGFnZS5cIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=